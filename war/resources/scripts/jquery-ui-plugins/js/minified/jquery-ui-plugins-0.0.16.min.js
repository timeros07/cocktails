(function(a,b){a.widget("uiplugins.combobox",{options:{"autocompleteOn":true,"buttonClass":"","buttonStyle":{},"height":20,"ignoreCase":true,"inputClass":"","inputStyle":{},"maxHeight":200,"searchType":"startsWith","width":200},_create:function(){var c=this;var d=this.$select=this.element.addClass("ui-combobox-select").hide(),e=d.children(":selected"),f=e.val()?e.text():"";
var g=this.$input=a("<input />").keydown(function(h){var i=a(this);if(h.which==a.ui.keyCode.DOWN&&!i.autocomplete("widget").is(":visible")){i.autocomplete("search","");return false;}}).height(this.options.height).insertAfter(d).val(f).wrap(a("<div></div>").addClass("ui-combobox")).autocomplete(this._initAutocomplete()).addClass("ui-widget ui-widget-content ui-corner-left ui-combobox-input"+(this.options.inputClass?" "+this.options.inputClass:"")).css(this.options.inputStyle);
g.data("autocomplete")._renderItem=function(h,i){h.addClass("ui-combobox-list");h.css("max-height",c.options.maxHeight);return a("<li></li>").data("item.autocomplete",i).append("<a>"+i.label+"</a>").appendTo(h);};this.$button=this._initButton();g.width(this.options.width-this.$button.width());if(!this.options.autocompleteOn){g.attr("disabled","disabled");
}},_initAutocomplete:function(){var c=this;return{delay:0,minLength:0,source:function(f,e){var h=c.options.searchType=="startsWith"?"^":"";var d=c.options.ignoreCase&&c.options.ignoreCase!=="false"?"i":"";var g=new RegExp(h+a.ui.autocomplete.escapeRegex(f.term),d);e(c.$select.children("option").map(function(){var i=a(this).text();
if(this.value&&(!f.term||g.test(i))){return{label:i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(f.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:i,option:this};}}));},select:function(d,e){e.item.option.selected=true;c._trigger("select",d,{"item":e.item.option});
},change:function(d,e){c._onChange(d,e);},open:function(d,e){c._trigger("open");},close:function(){c._trigger("close");}};},_initButton:function(){var c=this.$input;return a("<button>&nbsp;</button>").attr("tabIndex",-1).attr("title","Show All Items").insertAfter(c).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button"+(this.options.buttonClass?" "+this.options.buttonClass:"")).css(this.options.buttonStyle).height(this._getButtonHeight()).mousedown(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");
return;}c.autocomplete("search","").select();return false;});},_onChange:function(f,g){if(!g.item){var c=this;var h=new RegExp("^"+a.ui.autocomplete.escapeRegex(this.$input.val())+"$","i");var e=false;var d=this.$select;d.children("option").each(function(){if(this.text.match(h)){this.selected=e=true;
d.val(this.value);c._trigger("change",f,{"item":this});return false;}});if(!e){this.$input.val(d.children("option:selected").text());return false;}}},_getButtonHeight:function(){return this.$input.height()+Number(this.$input.css("border-top-width").replace("px",""))+Number(this.$input.css("border-bottom-width").replace("px",""));
},_setOption:function(c,d){switch(c){case"width":this.$input.width(d-this.$button.width());break;case"height":this.$input.height(d);this.$button.height(this._getButtonHeight());break;case"maxHeight":this.$input.autocomplete("widget").css("max-height",d+"px");break;case"buttonClass":this.$button.removeClass(this.options.buttonClass).addClass(d);
break;case"buttonStyle":if(typeof d==="string"){d=a.parseJSON(d);}this.$button.css(d);break;case"inputClass":this.$input.removeClass(this.options.inputClass).addClass(d);break;case"inputStyle":if(typeof d==="string"){d=a.parseJSON(d);}this.$input.css(d);break;case"autocompleteOn":if(d&&d!=="false"){this.$input.removeAttr("disabled","disabled");
}else{this.$input.attr("disabled","disabled");}break;}a.Widget.prototype._setOption.apply(this,arguments);},disable:function(){a.Widget.prototype.disable.call(this);this.close();this.$input.addClass("ui-state-disabled").attr("disabled","disabled");this.$button.addClass("ui-state-disabled").button("disable");
this._trigger("disable");},enable:function(){a.Widget.prototype.enable.call(this);this.$input.removeClass("ui-state-disabled").removeAttr("disabled");this.$button.removeClass("ui-state-disabled").button("enable");this._trigger("enable");},open:function(){this.$input.autocomplete("search","").select();
this._trigger("open");},close:function(){this.$input.autocomplete("close");this._trigger("close");},destroy:function(){var c=this.element;c.next("div.ui-combobox").remove();c.show();a.Widget.prototype.destroy.call(this);}});})(jQuery);if(!String.prototype.left){String.prototype.left=function(a){if(a<=0){return"";
}else{if(a>this.length){return this;}else{return this.substring(0,a);}}};}if(!String.prototype.right){String.prototype.right=function(b){if(b<=0){return"";}else{if(b>this.length){return this;}else{var a=this.length;return this.substring(a,a-b);}}};}if(!String.prototype.padLeft){String.prototype.padLeft=function(a,c){var b=this;
while(b.length<a){b=c+b;}return b;};}if(!String.prototype.contains){String.prototype.contains=function(a){return this.indexOf(a)>-1;};}if(!String.prototype.containsAny){String.prototype.containsAny=function(b){for(var a in b){if(this.indexOf(b[a])>-1){return true;}}return false;};}if(!String.prototype.startsWith){String.prototype.startsWith=function(a){return this.indexOf(a)===0;
};}if(!String.prototype.endsWith){String.prototype.endsWith=function(a){if(this.length<a.length){return false;}return this.lastIndexOf(a)===this.length-a.length;};}if(!String.prototype.toProperCase){String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase();
});};}(function(f,g){f.fn.padding=function(h){var i=0;this.each(function(){i=Number(f(this).css("padding-"+h).replace("px",""));});return i;};var e=new Array();e[32]=" ";e[48]="0";e[49]="1";e[50]="2";e[51]="3";e[52]="4";e[53]="5";e[54]="6";e[55]="7";e[56]="8";e[57]="9";e[65]="a";e[66]="b";e[67]="c";e[68]="d";
e[69]="e";e[70]="f";e[71]="g";e[72]="h";e[73]="i";e[74]="j";e[75]="k";e[76]="l";e[77]="m";e[78]="n";e[79]="o";e[80]="p";e[81]="q";e[82]="r";e[83]="s";e[84]="t";e[85]="u";e[86]="v";e[87]="w";e[88]="x";e[89]="y";e[90]="z";e[96]="0";e[97]="1";e[98]="2";e[99]="3";e[100]="4";e[101]="5";e[102]="6";e[103]="7";
e[104]="8";e[105]="9";e[106]="*";e[107]="+";e[109]="-";e[110]=".";e[111]="/";e[186]=";";e[187]="=";e[188]=",";e[189]="-";e[190]=".";e[191]="/";e[192]="`";e[219]="[";e[220]="\\";e[221]="]";e[222]="'";var d=new Array();d[32]=" ";d[48]=")";d[49]="!";d[50]="@";d[51]="#";d[52]="$";d[53]="%";d[54]="^";d[55]="&";
d[56]="*";d[57]="(";d[65]="A";d[66]="B";d[67]="C";d[68]="D";d[69]="E";d[70]="F";d[71]="G";d[72]="H";d[73]="I";d[74]="J";d[75]="K";d[76]="L";d[77]="M";d[78]="N";d[79]="O";d[80]="P";d[81]="Q";d[82]="R";d[83]="S";d[84]="T";d[85]="U";d[86]="V";d[87]="W";d[88]="X";d[89]="Y";d[90]="Z";d[96]="0";d[97]="1";d[98]="2";
d[99]="3";d[100]="4";d[101]="5";d[102]="6";d[103]="7";d[104]="8";d[105]="9";d[106]="*";d[107]="+";d[109]="-";d[110]=",";d[111]="/";d[186]=":";d[187]="+";d[188]="<";d[189]="_";d[190]=">";d[191]="?";d[192]="~";d[219]="{";d[220]="|";d[221]="}";d[222]='"';f.extend(f.ui.keyCode,{A:65,NUM_LOCK:144,NUMPAD_ZERO:96,PAUSE_BREAK:19,SCROLL_LOCK:145,WINDOWS_RIGHT:92,keyCode2Char:function(j,h){var i=h?d[j]:e[j];
i=(typeof i=="undefined")?"":i;return i;}});if(!f.currency){f.currency=function(h,i){return c(h,i);};}function c(j,k){var m=k.region;var l="";var i="";if(m=="ALL"){l="Lek";}if(m=="ARS"){l="$";}if(m=="AWG"){l="f";}if(m=="AUD"){l="$";}if(m=="BSD"){l="$";}if(m=="BBD"){l="$";}if(m=="BYR"){l="p.";}if(m=="BZD"){l="BZ$";
}if(m=="BMD"){l="$";}if(m=="BOB"){l="$b";}if(m=="BAM"){l="KM";}if(m=="BWP"){l="P";}if(m=="BRL"){l="R$";}if(m=="BND"){l="$";}if(m=="CAD"){l="$";}if(m=="KYD"){l="$";}if(m=="CLP"){l="$";}if(m=="CNY"){l="&yen;";}if(m=="COP"){l="$";}if(m=="CRC"){l="c";}if(m=="HRK"){l="kn";}if(m=="CZK"){l="Kc";}if(m=="DKK"){l="kr";
}if(m=="DOP"){l="RD$";}if(m=="XCD"){l="$";}if(m=="EGP"){l="&pound;";}if(m=="SVC"){l="$";}if(m=="EEK"){l="kr";}if(m=="EUR"){l="&euro;";}if(m=="FKP"){l="&pound;";}if(m=="FJD"){l="$";}if(m=="GBP"){l="&pound;";}if(m=="GHC"){l="c";}if(m=="GIP"){l="&pound;";}if(m=="GTQ"){l="Q";}if(m=="GGP"){l="&pound;";}if(m=="GYD"){l="$";
}if(m=="HNL"){l="L";}if(m=="HKD"){l="$";}if(m=="HUF"){l="Ft";}if(m=="ISK"){l="kr";}if(m=="IDR"){l="Rp";}if(m=="IMP"){l="&pound;";}if(m=="JMD"){l="J$";}if(m=="JPY"){l="&yen;";}if(m=="JEP"){l="&pound;";}if(m=="LVL"){l="Ls";}if(m=="LBP"){l="&pound;";}if(m=="LRD"){l="$";}if(m=="LTL"){l="Lt";}if(m=="MYR"){l="RM";
}if(m=="MXN"){l="$";}if(m=="MZN"){l="MT";}if(m=="NAD"){l="$";}if(m=="ANG"){l="f";}if(m=="NZD"){l="$";}if(m=="NIO"){l="C$";}if(m=="NOK"){l="kr";}if(m=="PAB"){l="B/.";}if(m=="PYG"){l="Gs";}if(m=="PEN"){l="S/.";}if(m=="PLN"){l="zl";}if(m=="RON"){l="lei";}if(m=="SHP"){l="&pound;";}if(m=="SGD"){l="$";}if(m=="SBD"){l="$";
}if(m=="SOS"){l="S";}if(m=="ZAR"){l="R";}if(m=="SEK"){l="kr";}if(m=="CHF"){l="CHF";}if(m=="SRD"){l="$";}if(m=="SYP"){l="&pound;";}if(m=="TWD"){l="NT$";}if(m=="TTD"){l="TT$";}if(m=="TRY"){l="TL";}if(m=="TRL"){l="&pound;";}if(m=="TVD"){l="$";}if(m=="GBP"){l="&pound;";}if(m=="USD"){l="$";}if(m=="UYU"){l="$U";
}if(m=="VEF"){l="Bs";}if(m=="ZWD"){l="Z$";}if(l==""&&i==""){l="$";}var h="";if(!k.hidePrefix){h+=l;}h+=a(j,k.decimals,k.decimal,k.thousands);if(!k.hidePostfix){h+=i;}return h;}function a(m,j,p,l){m=(m+"").replace(/[^0-9+\-Ee.]/g,"");var i=!isFinite(+m)?0:+m,h=!isFinite(+j)?0:Math.abs(j),t=(typeof l==="undefined")?",":l,k=(typeof p==="undefined")?".":p,q="",o=function(v,u){var s=Math.pow(10,u);
return""+Math.round(v*s)/s;};q=(h?o(i,h):""+Math.round(i)).split(".");if(q[0].length>3){q[0]=q[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,t);}if((q[1]||"").length<h){q[1]=q[1]||"";q[1]+=new Array(h-q[1].length+1).join("0");}return q.join(k);}function b(h){return !isNaN(parseFloat(h))&&isFinite(h);}})(jQuery);
(function(a,b){a.widget("uiplugins.grid",{options:{rowKey:"id",calendarImage:"http://jquery-ui-plugins.googlecode.com/svn/trunk/examples/images/calendar.png"},slickMethods:["addCellCssStyles","autosizeColumns","canCellBeActive","canCellBeSelected","editActiveCell","flashCell","focus","getActiveCell","getActiveCellNode","getActiveCellPosition","getCanvasNode","getCellCssStyles","getCellEditor","getCellFromEvent","getCellFromPoint","getCellNode","getCellNodeBox","getColumnIndex","getColumns","getData","getDataItem","getDataLength","getEditController","getEditorLock","getGridPosition","getHeaderRow","getHeaderRowColumn","getOptions","getRenderedRange","getSelectedRows","getSelectionModel","getSortColumns","getTopPanel","getViewport","gotoCell","init","invalidate","invalidateAllRows","invalidateRow","invalidateRows","navigateDown","navigateLeft","navigateNext","navigatePrev","navigateRight","navigateUp","registerPlugin","removeCellCssStyles","render","resetActiveCell","resizeCanvas","scrollCellIntoView","scrollRowIntoView","scrollRowToTop","setActiveCell","setCellCssStyles","setColumns","setData","setHeaderRowVisibility","setOptions","setSelectedRows","setSelectionModel","setSortColumn","setSortColumns","setTopPanelVisibility","unregisterPlugin","updateCell","updateColumnHeader","updateRow","updateRowCount"],slickEvents:["onActiveCellChanged","onActiveCellPositionChanged","onAddNewRow","onBeforeCellEditorDestroy","onBeforeDestroy","onBeforeEditCell","onCellChange","onCellCssStylesChanged","onClick","onColumnsReordered","onColumnsResized","onContextMenu","onDblClick","onDrag","onDragEnd","onDragInit","onDragStart","onHeaderClick","onHeaderContextMenu","onKeyDown","onMouseEnter","onMouseLeave","onScroll","onSelectedRowsChanged","onSort","onValidationError","onViewportChanged"],filterValues:{"numericDialog":[{"name":"Equal To","value":"eq"},{"name":"Not Equal To","value":"neq"},{"name":"Greater Than","value":"gt"},{"name":"Greater Than OR Equal To","value":"gte"},{"name":"Less Than","value":"lt"},{"name":"Less Than OR Equal To","value":"lte"}],"dateDialog":[{"name":"On","value":"eq"},{"name":"Before","value":"lt"},{"name":"After","value":"gt"}],"date":[{"name":"Today","value":"today"},{"name":"Tomorrow","value":"tomorrow"},{"name":"Yesterday","value":"yesterday"},{"name":"This Week","value":"thisweek"},{"name":"Next Week","value":"nextweek"},{"name":"Last Week","value":"lastweek"},{"name":"This Month","value":"thismonth"},{"name":"Next Month","value":"nextmonth"},{"name":"Last Month","value":"lastmonth"},{"name":"This Year","value":"thisyear"},{"name":"Next Year","value":"nextyear"},{"name":"Last Year","value":"lastyear"}]},logicOperators:[{"name":"And","value":"and"},{"name":"Or","value":"or"}],operators:{"gt":function(d,c){return +d>+c;
},"gte":function(d,c){return +d>=+c;},"lt":function(d,c){return +d<+c;},"lte":function(d,c){return +d<=+c;},"eq":function(d,c){return +d==+c;},"neq":function(d,c){return +d!=+c;},"and":function(d,c){return d&&c;},"or":function(d,c){return d||c;}},formatDefaults:{"checkbox":{"checkedValue":"true","notCheckedValue":"false"},"currency":{"region":"USD","thousands":",","decimal":".","decimals":2},},cssStyleHash:{},_create:function(){var c=this,e=this.options,f=this.dataView=new Slick.Data.DataView();
this.dataHash=this._initDataHash();this.dateInfo=this._initDateInfo();this.element.addClass("ui-grid");this.options.editDisabled=this.options.editable;this._initColumns();e.showHeaderRow=this.filters?true:e.showHeaderRow;var d=this.grid=new Slick.Grid(this.element,this.dataView,e.columns,e);this.options=d.getOptions();
if(this.filters){this._renderFilters();this._bindFilterEvents();}this._initSlickMethods();this._initEventHandlers();this._initSelectionModel();d.onSort.subscribe(function(h,g){sortCol=g.sortCol;c.dataView.sort(c.sortFunctions[sortCol.id],g.sortAsc);if(c.options.selectionModel){c.dataView.syncGridSelection(d,true);
}d.invalidate();});d.onColumnsReordered.subscribe(function(){c._renderFilters();});d.onColumnsResized.subscribe(function(){c._renderFilters();});f.getItemMetadata=function(i){var g={};var h=this.getItem(i);if(h&&h.cssClasses){g.cssClasses=h.cssClasses;}return g;};f.beginUpdate();f.setItems(e.data,e.rowKey);
f.endUpdate();d.invalidate();},_initColumns:function(){this.columns={};this.originalColumnDefs=[];for(var f=0;f<this.options.columns.length;f++){this.originalColumnDefs[f]=a.extend(true,{},this.options.columns[f]);}var e=this.options.columns;for(var f=0;f<e.length;f++){var d=e[f];d.headerCssClass+=" ui-grid-header";
this.columns[d.id]=d;this._initSorting(d);this._initFiltering(d);this._initEditing(d);this._initFormatting(d);}if(this.filters){var c=this;this.dataView.setFilter(function(g){return c._filter(g);});}},_initSorting:function(c,d){if(c.sort!==false){if(!this.sortFunctions){this.sortFunctions={};}c.sortable=true;
c.headerCssClass+=c.headerCssClass+" ui-grid-sortable";if(typeof c.sort==="function"){this.sortFunctions[c.id]=c.sort;}else{if(c.sort==="date"&&c.dateFormat){this._initDateSort(c);this.sortFunctions[c.id]=this._dateSort;}else{if(c.dataType==="numeric"||c.dataType==="integer"||c.sort==="numeric"||c.sort==="integer"){this.sortFunctions[c.id]=this._numericSort;
}else{this.sortFunctions[c.id]=this._sort;}}}}},_initFiltering:function(d){if(d.filter){if(!this.filters){this.filters={};}var f=(typeof d.filter==="object"&&d.filter.type==="list")||a.isArray(d.filter);var g=f&&!d.filterDefault?"$NO_FILTER$":d.filterDefault;if(d.filter.impl){this.filters[d.id]=a.extend(d.filter,{"type":"custom","value":g});
}else{var e=f?"list":d.filter;var c=null;if(f){c=d.filter.options?d.filter.options:d.filter;}this.filters[d.id]={"type":e,"value":g,"options":c,"dataItemAttribute":d.filter.dataItemAttribute};}}},_initEditing:function(c){if(c.editor){if(typeof c.editor!=="function"){var d=c.editor;var e=a.isArray(d);
if(d==="list"||e){c.editor=this._dropDownEdit;c.editorOptions=e?d:c.editorOptions;}else{if(d==="date"){c.editor=this._dateEdit;}else{c.editor=this._textEdit;c.dataType=d;}}}}},_initFormatting:function(e){var d=[];if(e.formatter){if(typeof e.formatter==="function"){d.push(e.formatter);}else{if(typeof e.formatter==="string"){e.formatOptions=a.extend({"type":e.formatter},this.formatDefaults[e.formatter]);
}else{if(typeof e.formatter==="object"&&e.formatter.type){e.formatOptions=a.extend({},this.formatDefaults[e.formatter.type],e.formatter);}}switch(e.formatOptions.type){case"checkbox":d.push(this._checkboxFormatter);this.hasCheckboxes=true;break;case"currency":d.push(this._currencyFormatter);break;case"properCase":d.push(this._properCaseFormatter);
break;}}}else{if(this.options.formatterFactory&&this.options.formatterFactory.getFormatter(e)){d.push(this.options.formatterFactory.getFormatter(e));}}d.push(this._addCellCssFormatter);if(d.length>0){var c=this;e.formatters=d;e.formatter=function(j,i,g,f,h){return c._formatterChain.call(this,j,i,g,f,h,c);
};}},_initDataHash:function(){var d={};var f=this.options.rowKey;for(var c=0;c<this.options.data.length;c++){var e=this.options.data[c];d[e[f]]=e;}return d;},_initDateInfo:function(){var c=Date.today().clearTime();return{"today":c.getTime(),"tomorrow":Date.today().addDays(1).getTime(),"yesterday":Date.today().addDays(-1).getTime(),"sunday":c.getDay()==0?c.clone():Date.today().moveToDayOfWeek(0,-1).getTime(),"lastSunday":c.getDay()==0?Date.today().moveToDayOfWeek(0,-1).getTime():Date.today().moveToDayOfWeek(0,-1).moveToDayOfWeek(0,-1).getTime(),"nextSunday":Date.today().moveToDayOfWeek(0).getTime(),"dayMillis":60*60*24*1000,"weekMillis":60*60*24*7*1000,"lastMonthStart":Date.today().moveToFirstDayOfMonth().addDays(-1).moveToFirstDayOfMonth().getTime(),"thisMonthStart":Date.today().moveToFirstDayOfMonth().getTime(),"nextMonthStart":Date.today().moveToLastDayOfMonth().addDays(1).getTime(),"nextMonthEnd":Date.today().moveToLastDayOfMonth().addDays(1).moveToLastDayOfMonth().addDays(1).getTime(),"lastYearStart":Date.today().set({day:1,month:0,year:c.getFullYear()-1}).getTime(),"thisYearStart":Date.today().set({day:1,month:0}).getTime(),"nextYearStart":Date.today().set({day:1,month:0,year:c.getFullYear()+1}).getTime(),"nextYearEnd":Date.today().set({day:1,month:0,year:c.getFullYear()+2}).getTime()};
},_initDateSort:function(d){var e=this.option("data");for(var c=0;c<e.length;c++){var f=e[c];f[d.field+"-sort"]=Date.parseExact(f[d.field],d.dateFormat).getTime();}},_initSlickMethods:function(){for(var d=0;d<this.slickMethods.length;d++){var c=this.slickMethods[d];switch(c){case"getData":this[c]=function(){return this.options.data;
};this["getDataView"]=this.grid[c];break;case"setData":this[c]=function(e){this.options.data=e;this.dataHash=this._initDataHash();this.grid.setData(e);this.grid.invalidate();};break;case"getColumns":this[c]=function(){return this.originalColumnDefs;};break;case"setColumns":this[c]=function(e){this.options.columns=e;
this._initColumns();this.grid.setColumns(this.options.columns);this.grid.render();this._renderFilters();};break;default:this[c]=this.grid[c];}}},_initEventHandlers:function(){for(var d=0;d<this.slickMethods.length;d++){var c=this.slickEvents[d];this._bindEventHandler(c,this.options[c]);}if(this.hasCheckboxes){this._bindCheckboxHandler();
}},_initSelectionModel:function(){var c=this.options.selectionModel;if(c){if(typeof c==="string"){switch(c){case"row":c=new Slick.RowSelectionModel({selectActiveRow:this.options.selectActiveRow});break;case"cell":c=new Slick.CellSelectionModel({selectActiveCell:this.options.selectActiveCell});break;}}this.grid.setSelectionModel(c);
}},_bindCheckboxHandler:function(){var c=this;var d=this.grid;this.element.on("click","input.ui-grid-checkbox",function(l){var h=d.getActiveCell();var j=d.getDataItem(h.row);var g=d.getColumns()[h.cell];var i=a(this);j[g.field]=i.is(":checked")?g.formatOptions.checkedValue:g.formatOptions.notCheckedValue;
var k=i.parent("div");k.toggleClass("ui-changed-cell");if(k.hasClass("ui-changed-cell")){var m={};var f=j[g.field]===g.formatOptions.checkedValue?g.formatOptions.notCheckedValue:g.formatOptions.checkedValue;m[g.field]=f;a.extend(true,j,{"changedCells":m});}else{delete j.changedCells[g.field];}c._slickGridTrigger(d.onCellChange,{row:h.row,cell:h.cell,item:j});
});},_slickGridTrigger:function(c,d,f){f=f||new Slick.EventData();d=d||{};d.grid=self;return c.notify(d,f,self);},_bindEventHandler:function(c,d){if(d){this.grid[c].subscribe(d);}},_sort:function(e,d){var f=e[sortCol.field],c=d[sortCol.field];return(f==c?0:(f>c?1:-1));},_numericSort:function(e,d){var f=+e[sortCol.field],c=+d[sortCol.field];
return(f==c?0:(f>c?1:-1));},_dateSort:function(e,d){var f=e[sortCol.field+"-sort"],c=d[sortCol.field+"-sort"];return(f==c?0:(f>c?1:-1));},_renderFilters:function(){var l=this;var c=this.grid;var h=c.getColumns();for(var j=0;j<h.length;j++){var g=h[j];var f=l.filters[g.id];if(f){var d=a(c.getHeaderRowColumn(g.id)).empty();
var e="ui-grid-filter-"+g.id;var k=f.value?f.value:"";if(f.options){l._renderDropDownFilter(e,d,g,f.options);}else{if(f.type==="numeric"){l._renderTextFilter(e,d,g,k).width(d.width()-24).css("float","left").textinput({"filter":"numeric"});l._renderFilterButton(f.type,g,d);}else{if(f.type==="date"){l._renderDropDownFilter(e,d,g,l.filterValues[f.type]).width(d.width()-20).css("float","left");
l._renderFilterButton(f.type,g,d);}else{l._renderTextFilter(e,d,g,k);}}}}}},_renderFilterButton:function(e,d,c){a('<span class="ui-filter-button"/>').appendTo(c).data({"columnId":d.id,"type":e});},_renderTextFilter:function(g,d,e,f){var c=this;return a('<input type="text" class="ui-grid-filter '+g+'" value="'+f+'">').appendTo(d).data("columnId",e.id).width(d.width()-4).height(d.height()-12).click(function(){c.saveCurrentEdit();
a(this).focus();});},_renderDropDownFilter:function(e,c,g,p){var o=this;var k='<select class="ui-grid-filter '+e+'">';k+='<option value="$NO_FILTER$"></option>';var f=this.filters[g.id];var l=f.value;for(var h=0;h<p.length;h++){var j=p[h];var n=typeof j==="object";var m=n?j.value:j;var d=n?j.name:j;k+='<option value="'+m+'"'+(m===l?"selected":"")+">"+d+"</option>";
}k+="</select>";return a(k).appendTo(c).data("columnId",g.id).width(c.width()-4).val(l).click(function(){o.saveCurrentEdit();a(this).focus();});},_renderFilterDialog:function(h,f){var g=a("#ui-grid-filter-dialog-"+h);if(g.length==0){var e='<div id="ui-grid-filter-dialog-'+h+'" style="display: none;" class="ui-grid-filter-dialog">';
e+='<div><label>Show rows where </label><label class="columnName"></label></div>';e+=this._getFilterHtml(f+"Dialog");e+="<div>";for(var d=0;d<this.logicOperators.length;d++){var c=this.logicOperators[d];e+='<input type="radio" name="logicOperator" class="ui-filter-logic-operator" value="'+c.value+'"/><label>'+c.name+"</label>";
}e+="</div>";e+=this._getFilterHtml(f+"Dialog");e+="</div>";g=a(e);}return g;},_getFilterHtml:function(f){var d='<div><select class="ui-filter-compare-operator">';var g=this.filterValues[f];for(var c=0;c<g.length;c++){var e=g[c];d+='<option value="'+e.value+'">'+e.name+"</option>";}d+='<input type="text" class="ui-filter-val'+(f.startsWith("date")?" ui-date-filter":"")+'"/>';
d+="</select>";d+="</div>";return d;},_bindFilterEvents:function(){var c=this;$headerRow=a(this.grid.getHeaderRow());$headerRow.on("change keyup","input, select",function(f){var d=a(this).data("columnId");c._filterColumn(d);});$headerRow.on("click","span.ui-filter-button",function(h){if(!c.disabled){var g=a(this);
var f=g.data("columnId");var d=g.data("type");c._showFilterDialog(a(this),f,d);}});},_showFilterDialog:function(j,i,f){var c=this;var h=this._renderFilterDialog(i,f);var e=this.columns[i];var g={"Cancel":function(){a(this).dialog("close");},"OK":function(){c._applyDialogFilter(h,e);}};if(this.filters[i].logic){g["Clear"]=function(){c._clearDialogFilter(h,i);
};}h.find("label.columnName").text(e.name+" is:");var d=h.find("input.ui-date-filter");d.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:c.options.calendarImage,beforeShow:function(){a("#ui-datepicker-div").addClass("ui-grid-datepicker");},onClose:function(){a("#ui-datepicker-div").addClass("ui-grid-datepicker");
}});d.datepicker("option","buttonImage",c.options.calendarImage);h.keypress(function(k){if(k.keyCode==a.ui.keyCode.ENTER){c._applyDialogFilter(h,e);}});h.dialog({"title":(f.toProperCase()+" Filter"),"modal":true,"dialogClass":"ui-filter-dialog","buttons":g,"position":{my:"left top",at:"left bottom",of:j}}).show();
},_filterColumn:function(g){if(g){var e=this.filters[g];if(e.type==="numeric"||e.type==="date"){var f=a("#ui-grid-filter-dialog-"+g);var d=this.columns[g];var c={};c.comparisons=[];f.find("select.ui-filter-compare-operator").each(function(){var i=a(this);var h=i.next("input.ui-filter-val").val();if(h){h=e.type==="date"?Date.parseExact(h,d.dateFormat).getTime():h;
c.comparisons.push({"operator":i.val(),"value":h});}});c.logicOperator=f.find("input.ui-filter-logic-operator:checked").val();if(c.comparisons.length){e.logic=c;}}e.value=a.trim(a("#"+this.element.attr("id")+" .ui-grid-filter-"+g).val());this.dataView.refresh();this.grid.invalidate();}},_filter:function(j){var c=this.grid;
var f=this.filters;if(j&&f){var k=true;for(var d in f){var e=f[d];if((e&&e.value!==b&&e.value!=="$NO_FILTER$")||(e.logic)){var h=c.getColumns();var g=h[c.getColumnIndex(d)];if(g==null||g==b){continue;}var i=j[g.field];i=typeof i==="object"&&e.dataItemAttribute?i[e.dataItemAttribute]+"":i+"";if(i||i===""){switch(e.type){case"startsWith":k=i.toLowerCase().startsWith(e.value.toLowerCase());
break;case"endsWith":k=i.toLowerCase().endsWith(e.value.toLowerCase());break;case"contains":k=i.toLowerCase().indexOf(e.value.toLowerCase())>-1;break;case"doesNotContain":k=!e.value||i.toLowerCase().indexOf(e.value.toLowerCase())===-1;break;case"list":k=i===e.value;break;case"numeric":k=this._applyNumericFilter(e,i);
break;case"date":k=this._applyDateFilter(e,j[g.field+"-sort"]);break;case"custom":k=e.impl.call(e,e.value,i);break;}}if(!k){return k;}}}}return true;},_applyNumericFilter:function(d,j){var k=true;var e=d.logic;if(e&&e.comparisons.length>0){var h=e.comparisons[0];var g=e.comparisons[1];var c=e.logicOperator;
if(g&&c){var i=this.operators[h.operator](j,h.value);var f=this.operators[g.operator](j,g.value);k=this.operators[c](i,f);}else{k=this.operators[h.operator](j,h.value);}}if(d.value){k=k&&+j==+d.value;}return k;},_applyDateFilter:function(d,j){var k=true;j=+j;var e=d.logic;if(e&&e.comparisons.length>0){var h=e.comparisons[0];
var g=e.comparisons[1];var c=e.logicOperator;if(g&&c){var i=this.operators[h.operator](j,h.value);var f=this.operators[g.operator](j,g.value);k=this.operators[c](i,f);}else{k=this.operators[h.operator](j,h.value);}}if(d.value){switch(d.value){case"today":k=j>=this.dateInfo.today&&j<this.dateInfo.tomorrow;
break;case"tomorrow":k=j>=this.dateInfo.tomorrow&&j<this.dateInfo.tomorrow+this.dateInfo.dayMillis;break;case"yesterday":k=j>=this.dateInfo.yesterday&&j<this.dateInfo.today;break;case"thisweek":k=j>=this.dateInfo.sunday&&j<this.dateInfo.nextSunday;break;case"nextweek":k=j>=this.dateInfo.nextSunday&&j<this.dateInfo.nextSunday+this.dateInfo.weekMillis;
break;case"lastweek":k=j>=this.dateInfo.lastSunday&&j<this.dateInfo.sunday;break;case"thismonth":k=j>=this.dateInfo.thisMonthStart&&j<this.dateInfo.nextMonthStart;break;case"nextmonth":k=j>=this.dateInfo.nextMonthStart&&j<this.dateInfo.nextMonthEnd;break;case"lastmonth":k=j>=this.dateInfo.lastMonthStart&&j<this.dateInfo.thisMonthStart;
break;case"thisyear":k=j>=this.dateInfo.thisYearStart&&j<this.dateInfo.nextYearStart;break;case"nextyear":k=j>=this.dateInfo.nextYearStart&&j<this.dateInfo.nextYearEnd;break;case"lastyear":k=j>=this.dateInfo.lastYearStart&&j<this.dateInfo.thisYearStart;break;}}return k;},_applyDialogFilter:function(f,d){var c=this;
var e=d.id;this._filterColumn(e);this.grid.updateColumnHeader(e,d.name+'<span id="'+e+'_removeFilterButton" class="ui-remove-filter-button"></span>',"");a("#"+e+"_removeFilterButton").click(function(){c._clearDialogFilter(f,e);});f.dialog("close");},_clearDialogFilter:function(d,c){this.filters[c].logic=null;
d.find("select.ui-filter-compare-operator").val("");d.find("input.ui-filter-val").val("");d.find("input.ui-filter-logic-operator").removeAttr("checked");this._filterColumn(c);a("#"+c+"_removeFilterButton").remove();d.dialog("close");},_dateEdit:function(d){var f=null;var c=null;var e=false;this.init=function(){var h=a(d.container);
var g=h.padding("top");f=a('<input type="text" class="ui-grid-editor" />').appendTo(d.container).width(h.width()+h.padding("right")-(a.browser.msie||a.browser.mozilla?2:1)).height(h.height()-g-h.padding("bottom")).css({"position":"relative","top":-g,"left":-h.padding("left")}).focus().select();f.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:d.grid.getOptions()["calendarImage"],beforeShow:function(){a("#ui-datepicker-div").addClass("ui-grid-datepicker");
e=true;},onClose:function(){a("#ui-datepicker-div").addClass("ui-grid-datepicker");e=false;}});f.width(f.width()-18);};this.destroy=function(){a.datepicker.dpDiv.stop(true,true);f.datepicker("hide");f.datepicker("destroy");f.remove();};this.show=function(){if(e){a.datepicker.dpDiv.stop(true,true).show();
}};this.hide=function(){if(e){a.datepicker.dpDiv.stop(true,true).hide();}};this.position=function(g){if(!e){return;}a.datepicker.dpDiv.css("top",g.top+30).css("left",g.left);};this.focus=function(){f.focus();};this.loadValue=function(g){c=g[d.column.field];f.val(c);f[0].defaultValue=c;f.select();};this.serializeValue=function(){return f.val();
};this.applyValue=function(h,i){var g=d.column;h[g.field]=i;if(g.sort==="date"&&g.dateFormat){h[g.field+"-sort"]=Date.parseExact(i,g.dateFormat).getTime();}};this.isValueChanged=function(){return a.uiplugins.grid.prototype._trackChange.call(this,f,c,d);};this.validate=function(){return{valid:true,msg:null};
};this.init();},_textEdit:function(d){var e=null;var c=null;this.init=function(){var g=a(d.container);var f=g.padding("top");e=a('<input type="text" class="ui-grid-editor"/>').appendTo(d.container).bind("keydown.nav",function(h){if(h.keyCode===a.ui.keyCode.LEFT||h.keyCode===a.ui.keyCode.RIGHT){h.stopImmediatePropagation();
}}).width(g.width()+g.padding("right")-(a.browser.msie||a.browser.mozilla?2:1)).height(g.height()-f-g.padding("bottom")).css({"position":"relative","top":-f,"left":-g.padding("left"),"text-align":g.css("text-align")}).focus().select();switch(d.column.dataType){case"integer":e.textinput({"filter":"digits"});
break;case"numeric":e.textinput({"filter":"numeric"});break;}};this.destroy=function(){e.remove();};this.focus=function(){e.focus();};this.getValue=function(){return e.val();};this.setValue=function(f){e.val(f);};this.loadValue=function(f){c=f[d.column.field]||"";e.val(c);e[0].defaultValue=c;e.select();
};this.serializeValue=function(){return e.val();};this.applyValue=function(f,g){f[d.column.field]=g;};this.isValueChanged=function(){return a.uiplugins.grid.prototype._trackChange.call(this,e,c,d);};this.validate=function(){if(d.column.validator){var f=d.column.validator(e.val());if(!f.valid){return f;
}}return{valid:true,msg:null};};this.init();},_dropDownEdit:function(e){var d=null;var c=null;this.init=function(){var l='<select tabIndex="0" class="ui-grid-editor">';var q=typeof e.column.editorOptions==="function"?e.column.editorOptions.call(this,e.item,e.column):e.column.editorOptions;var m=a(e.container);
var o=m.padding("top");var g=m.padding("left");for(var j=0;j<q.length;j++){var k=q[j];var p=typeof k==="object";var f=p?k.name:k;var n=p?k.value:k;var h=p&&k.disabled?' disabled="disabled"':"";l+='<option value="'+n+'"'+h+">"+f+"</option>";}l+="</select>";d=a(l).width(m.width()+m.padding("right")+g).height(m.height()+o+m.padding("bottom")).css({"position":"relative","top":-o,"left":-g,"text-align":m.css("text-align")}).appendTo(e.container).focus();
};this.destroy=function(){d.remove();};this.focus=function(){d.focus();};this.loadValue=function(f){d.val((c=f[e.column.field]||""));d.select();};this.serializeValue=function(){return d.val();};this.applyValue=function(f,g){f[e.column.field]=g;};this.isValueChanged=function(){return a.uiplugins.grid.prototype._trackChange.call(this,d,c,e);
};this.validate=function(){return{valid:true,msg:null};};this.init();},_trackChange:function(h,f,e){var l=e.item;var c=e.column.dataType==="numeric";var j=c?Number(h.val()):h.val();var k=(!(j==""&&f==null))&&(j!=f);var d=l.changedCells&&l.changedCells[e.column.field]!==b;if(k&&!d){var g={};g[e.column.field]=f;
a.extend(true,l,{"changedCells":g});}else{if(k&&d){var i=c?Number(l.changedCells[e.column.field]):l.changedCells[e.column.field];if(j===i){delete l.changedCells[e.column.field];}}}return k;},_currencyFormatter:function(g,f,d,c,e){if(a.currency){d=a.currency(d,c.formatOptions);}return d;},_checkboxFormatter:function(i,h,f,d,g,c){var e='<input type="checkbox" class="ui-grid-checkbox"';
if(f&&(f+"").toLowerCase()!==d.formatOptions.notCheckedValue.toLowerCase()){e+=' checked="checked"';}if(c.disabled){e+=' disabled="disabled"';}e+="/>";return e;},_properCaseFormatter:function(g,f,d,c,e){return d?d.toProperCase():"";},_addCellCssFormatter:function(g,f,d,c,e){html="<div";if(e.cellClasses&&e.cellClasses[c.field]!==b){html+=' class="'+e.cellClasses[c.field]+'"';
}html+=">"+d+"</div>";return html;},_formatterChain:function(j,g,k,f,m,l){var h=m.cellClasses?m.cellClasses:{};if(m.changedCells&&m.changedCells[f.field]!==b){h[f.field]=h[f.field]?h[f.field]+" ui-changed-cell":"ui-changed-cell";m.cellClasses=h;}else{if(h[f.field]){var c=h[f.field].split(" ");var d="";
for(var e=0;e<c.length;e++){if(c[e]!=="ui-changed-cell"){d+=(" "+c[e]);}}m.cellClasses[f.field]=d;}}for(var e=0;e<f.formatters.length;e++){k=f.formatters[e].call(this,j,g,k,f,m,l);}return k;},_removeFromClassList:function(e,h){var c=h.split(" ");var f=e.split(" ");var g="";for(var d=0;d<f.length;d++){if(a.inArray(f[d],c)===-1){g+=f[d]+" ";
}}return g.trim();},_toggleColumnAttributesDisabled:function(c,e){var g=this.options.columns;for(var f=0;f<g.length;f++){var h=g[f];for(var d=0;d<c.length;d++){var k=c[d];if(e&&h[k]){h[k]=false;h[k+"Disabled"]=true;}else{if(h[k+"Disabled"]){h[k]=true;h[k+"Disabled"]=false;}}}}},_setOption:function(c,d){a.Widget.prototype._setOption.apply(this,arguments);
this.grid.setOptions(this.options);switch(c){case"showHeaderRow":this.grid.setHeaderRowVisibility(d&&d!=="false");break;}},getSlickGrid:function(){return this.grid;},cancelCurrentEdit:function(){var c=this.grid.getEditorLock();if(c.isActive()){c.cancelCurrentEdit();}},saveCurrentEdit:function(){var c=this.grid.getEditorLock();
if(c.isActive()){c.commitCurrentEdit();}},setRowCssClass:function(e,c){var d=this.getItem(e);if(d){d.cssClasses=c;this.grid.invalidate();}},removeRowCssClass:function(e,c){var d=this.getItem(e);if(d&&d.cssClasses){this.setRowCssClass(e,this._removeFromClassList(d.cssClasses,c));this.grid.invalidate();
}},setCellCssClasses:function(c){if(c&&c.length){for(var e=0;e<c.length;e++){var f=c[e];var g=this.getItem(f.rowKey);if(g){var d=g.cellClasses?g.cellClasses:{};a.extend(d,f.cellClasses);g.cellClasses=d;}}this.grid.invalidate();}},addCellCssClass:function(f,d,c){var e=this.getCellCssClass(f,d);e+=" "+c;
this.setCellCssClass(f,d,e.trim());this.grid.invalidate();},removeCellCssClass:function(f,d,c){var e=this.getCellCssClass(f,d);if(e){this.setCellCssClass(f,d,this._removeFromClassList(e,c));this.grid.invalidate();}},getCellCssClass:function(f,c){var d="";var e=this.getItem(f);if(e){d=e.cellClasses?e.cellClasses[c]:d;
}return d;},setCellCssClass:function(g,d,c){var f=this.getItem(g);if(f){var e={};e[d]=c;this.setCellCssClasses([{rowKey:g,cellClasses:e}]);}},clearCellCssClass:function(d,c){this.setCellCssClass(d,c,"");},getItem:function(c){return this.dataHash[c];},setItem:function(d,c){this.dataHash[d]=c;this.dataView.updateItem(d,c);
this.grid.invalidate();},getItems:function(e){var c=[];for(var d=0;d<e.length;d++){c.push(this.dataHash[e[d]]);}return c;},replaceItem:function(e,d){delete this.dataHash[e];this.dataHash[d.id]=d;var c=this.dataView.getRowById(e);this.dataView.insertItem(c,d);this.dataView.deleteItem(e);this.grid.invalidate();
},isItemChanged:function(f){var c=false;var d=this.getItem(f);if(d&&d.changedCells){for(var e in d.changedCells){c=true;break;}}return c;},getOriginalValue:function(c,d){var m=this.getItem(c);var l=m[d];if(m&&m.changedCells){var k=this.getChanges();for(var f=0;f<k.length;f++){var h=k[f];if(h[this.options.rowKey]===c){for(var e=0;
e<h.changes.length;e++){var g=h.changes[e];if(g.field==d){l=g.oldValue;break;}}}}}return l;},markItemChanged:function(h,d,c){var e=this.getItem(h);var f=e.changedCells&&e.changedCells[d]!==b;if(!f){var g={};g[d]=c;a.extend(true,e,{"changedCells":g});}this.grid.invalidate();},getChanges:function(){var d=[];
for(var c=0;c<this.options.data.length;c++){var e=this.options.data[c];if(e.changedCells){var f=[];for(var g in e.changedCells){f.push({"field":g,"oldValue":e.changedCells[g],"newValue":e[g]});}if(f.length>0){var h={"changes":f};h[this.options.rowKey]=e[this.options.rowKey];d.push(h);}}}return d;},getChangedItems:function(){var c=[];
for(var d=0;d<this.options.data.length;d++){var e=this.options.data[d];if(e.changedCells){for(var f in e.changedCells){var g=a.extend(true,{},e);delete g.cssClasses;delete g.changedCells;delete g.cellClasses;c.push(g);break;}}}return c;},clearItemChanges:function(e){for(var c=0;c<this.options.data.length;
c++){var d=this.options.data[c];if(d[this.options.rowKey]==e){delete d.changedCells;break;}}this.grid.invalidate();},clearChangedItems:function(){for(var c=0;c<this.options.data.length;c++){var d=this.options.data[c];if(d.changedCells){delete d.changedCells;}}this.grid.invalidate();},disable:function(){a.Widget.prototype.disable.call(this);
this.options.editDisabled=this.options.editable;this.options.columnReorderDisabled=this.options.enableColumnReorder;this.options.editable=false;this.options.enableColumnReorder=false;this.grid.setOptions(this.options);this.element.find("div.slick-header-columns").sortable("disable");this._toggleColumnAttributesDisabled(["sortable","resizable"],true);
this.element.find("div.slick-headerrow-columns .ui-grid-filter").attr("disabled","disabled");this.element.find("div.slick-viewport").css("overflow-y","hidden");this.disabled=true;this.grid.invalidate();this._trigger("disable");},enable:function(){a.Widget.prototype.enable.call(this);this.options.editable=this.options.editDisabled;
this.options.enableColumnReorder=this.options.columnReorderDisabled;this.grid.setOptions(this.options);if(this.options.enableColumnReorder){this.element.find("div.slick-header-columns").sortable("enable");}this._toggleColumnAttributesDisabled(["sortable","resizable"],false);this.element.find("div.slick-headerrow-columns .ui-grid-filter").removeAttr("disabled");
this.element.find("div.slick-viewport").css("overflow-y","auto");this.disabled=false;this.grid.invalidate();this._trigger("enable");},destroy:function(){this.grid.onColumnsReordered.unsubscribe();this.grid.onColumnsResized.unsubscribe();this.grid.destroy();this.element.removeClass("ui-grid ui-widget").unbind().empty();
a.Widget.prototype.destroy.call(this);}});})(jQuery);(function($,undefined){$.widget("uiplugins.groupbox",{options:{"buttonSize":"medium","buttonStyle":{},"cssClassList1":"","cssClassList2":"","height":"500","idAttr":"id","itemSize":"medium","itemsList1":[],"itemsList2":[],"itemStyle":{},"labelAttr":"name","labelList1":"From","labelList2":"To","selectable":true,"width":"300",},_create:function(){var $groupbox=this.element;
$groupbox.addClass("ui-groupbox");this.$groupbox=$groupbox;this.$lastSelection;this._initItemsObject();this._render();},_initItemsObject:function(){var opts=this.options;this.itemsObject={};this._addToItemsObject(opts.itemsList1);this._addToItemsObject(opts.itemsList2);},_addToItemsObject:function(itemList){var itemsObject=this.itemsObject;
var opts=this.options;for(var i=0;i<itemList.length;i++){var item=itemList[i];itemsObject["ui-groupbox-item-"+item[opts.idAttr]]=item;}},_render:function(){var self=this;var $groupbox=this.$groupbox;var opts=this.options;var $itemsList1=this._renderList(opts.labelList1,opts.itemsList1,opts.cssClassList1);
$itemsList1.addClass("group1");var $buttons=$('<div class="ui-groupbox-buttons"></div>');$addButton=$('<button class="ui-groupbox-add"><span class="ui-icon ui-icon-arrowthick-1-e" title="Add Selected">Add</span></button>').button();$removeButton=$('<button class="ui-groupbox-remove"><span class="ui-icon ui-icon-arrowthick-1-w" title="Remove Selected">Remove</span></button>').button();
$buttons.append($addButton).append("<br/>").append($removeButton);$groupbox.append($buttons).after('<div class="ui-groupbox-clear"/>');var $itemsList2=this._renderList(opts.labelList2,opts.itemsList2,opts.cssClassList2);$itemsList2.addClass("group2");$addButton.click(function(){self._moveSelected($itemsList1,$itemsList2);
});$removeButton.click(function(){self._moveSelected($itemsList2,$itemsList1);});$("div.ui-groupbox-buttons button span.ui-button-text").addClass("ui-button-"+opts.buttonSize);$buttons.css("top",this._getButtonTop());$buttons.find("button").css(opts.buttonStyle);this._bindListEvents($itemsList1,$itemsList2);
this._bindListEvents($itemsList2,$itemsList1);},_renderList:function(label,items,cssClass){var $wrapperDiv=$('<div class="ui-groupbox-list-wrapper"></div>');var opts=this.options;$wrapperDiv.append('<label class="ui-groupbox-label">'+label+"</label>");if(cssClass){$wrapperDiv.addClass(cssClass);}$scrollDiv=$('<div class="ui-groupbox-scroll"></div>');
$scrollDiv.css({"width":opts.width,"height":opts.height});$list=$('<ul class="ui-groupbox-list"></ul>');this._refreshItems($list,items);$scrollDiv.append($list);$wrapperDiv.append($scrollDiv);this.$groupbox.append($wrapperDiv);return $list;},_refreshItems:function($list,items){var itemsHtml="";var opts=this.options;
if(items.length){for(var i=0;i<items.length;i++){var item=items[i];var classList=item.selected?"ui-selected ui-state-active ui-groupbox-item ui-item-"+opts.itemSize:"ui-state-default ui-groupbox-item ui-item-"+opts.itemSize;itemsHtml+='<li id="ui-groupbox-item-'+item[opts.idAttr]+'" class="'+classList+'">'+item[opts.labelAttr]+"</li>";
}}$list.html(itemsHtml);$list.children("li.ui-groupbox-item").css(opts.itemStyle);},_bindListEvents:function($list,$otherList){var self=this;$list.children("li.ui-groupbox-item").each(function(){self._bindListItemEvents($(this),$otherList);});if(this.options.selectable){this._makeListSelectable($list);
}},_bindListItemEvents:function($listItem,$otherList){var self=this;$listItem.click(function(event){if(!self.options["disabled"]){var $item=$(this);var $list=$item.parent("ul");var selected=$item.toggleClass("ui-selected ui-state-active").hasClass("ui-selected");if(selected){if(event.shiftKey&&self.$lastSelection){var itemIndex=$item.index();
var lastItemIndex=self.$lastSelection.index();var start=itemIndex>lastItemIndex?lastItemIndex+1:itemIndex+1;var end=itemIndex>lastItemIndex?itemIndex:lastItemIndex;$list.children("li").slice(start,end).addClass("ui-selected ui-state-active");}self.$lastSelection=$item;}}});$listItem.dblclick(function(){self._moveItem($(this),$otherList);
});},_makeListSelectable:function($list){$list.selectable({distance:10,start:function(event,ui){$(event.target).children("li.ui-selected").removeClass("ui-state-active");},stop:function(event,ui){$(event.target).children("li.ui-selected").addClass("ui-state-active");}});},_getButtonTop:function(){return this.$groupbox.find("div.ui-groupbox-list-wrapper").height()/2-this.$groupbox.find("div.ui-groupbox-buttons").height()/2+this.$groupbox.find("label.ui-groupbox-label").height()/2;
},_setOption:function(option,value){var self=this;switch(option){case"width":this.$groupbox.find("div.ui-groupbox-scroll").width(value);break;case"height":this.$groupbox.find("div.ui-groupbox-scroll").height(value);this.$groupbox.find("div.ui-groupbox-buttons").css("top",this._getButtonTop());break;case"selectable":this.$groupbox.find("ul.ui-groupbox-list").each(function(){if(eval(value)){self._makeListSelectable($(this));
}else{$(this).selectable("destroy");}});break;case"labelList1":case"labelList2":this.$groupbox.find("ul.group"+option.charAt(option.length-1)).parents("div.ui-groupbox-list-wrapper").children("label.ui-groupbox-label").text(value);break;case"cssClassList1":case"cssClassList2":this.$groupbox.find("ul.group"+option.charAt(option.length-1)).parents("div.ui-groupbox-list-wrapper").attr("class","ui-groupbox-list-wrapper "+value);
break;case"itemsList1":case"itemsList2":var listNumber=option=="itemsList1"?1:2;if(typeof value==="string"){value=$.parseJSON(value);}this.setItems(listNumber,value);break;case"buttonSize":this.$groupbox.find("div.ui-groupbox-buttons button span.ui-button-text").removeClass("ui-button-"+this.options.buttonSize).addClass("ui-button-"+value);
this.$groupbox.find("div.ui-groupbox-buttons").css("top",this._getButtonTop());break;case"buttonStyle":if(typeof value==="string"){value=$.parseJSON(value);}this.$groupbox.find("div.ui-groupbox-buttons button").css(value);break;case"itemSize":this.$groupbox.find("li.ui-groupbox-item").removeClass("ui-item-"+this.options.itemSize).addClass("ui-item-"+value);
break;case"itemStyle":if(typeof value==="string"){value=$.parseJSON(value);}this.$groupbox.find("li.ui-groupbox-item").css(value);break;}$.Widget.prototype._setOption.apply(this,arguments);},_moveItem:function($item,$toList){if(!this.options["disabled"]){var $fromList=$item.parent("ul");var removeFromList1=$fromList.hasClass("group1");
var fromList=removeFromList1?this.options.itemsList1:this.options.itemsList2;var toList=removeFromList1?this.options.itemsList2:this.options.itemsList1;var itemIndex=$item.index();this._trigger("beforeMove",null,{"item":fromList[itemIndex],"fromList":fromList,"toList":toList,"fromListElement":$fromList,"toListElement":$toList});
var removedItem=fromList.splice(itemIndex,1)[0];toList.push(removedItem);var $newItem=$('<li id="'+$item.attr("id")+'" class="ui-state-default ui-groupbox-item ui-item-'+this.options.itemSize+'">'+$item.html()+"</li>");$newItem.css(this.options.itemStyle);this._bindListItemEvents($newItem,$fromList);
$toList.append($newItem);$item.remove();this._trigger("afterMove",null,{"item":removedItem,"fromList":fromList,"toList":toList,"fromListElement":$fromList,"toListElement":$toList});}},_moveSelected:function($fromList,$toList){var self=this;$fromList.children("li.ui-state-active").each(function(){self._moveItem($(this),$toList);
});},getItems:function(listNumber){return listNumber==1?this.options.itemsList1:this.options.itemsList2;},setItems:function(listNumber,items){this.options["itemsList"+listNumber]=items;var $items=this.$groupbox.find("ul.group"+listNumber);this._initItemsObject();this._refreshItems($items,items);var otherListNumber=listNumber==1?2:1;
this._bindListEvents($items,this.$groupbox.find("ul.group"+otherListNumber));},getSelected:function(listNumber){var items=[];var itemsObject=this.itemsObject;this.$groupbox.find("ul.group"+listNumber).children("li.ui-state-active").each(function(){items.push(itemsObject[$(this).attr("id")]);});return items;
},setSelected:function(listNumber,items,clearSelections){var $list=this.$groupbox.find("ul.group"+listNumber);var isIdList=typeof items[0]!=="object";if(clearSelections){$list.children("li.ui-groupbox-item").removeClass("ui-state-active");}for(var i=0;i<items.length;i++){var id=isIdList?items[i]:items[i][this.options.idAttr];
$list.children("#ui-groupbox-item-"+id).addClass("ui-state-active");}},addItem:function(listNumber,item){var opts=this.options;var id="ui-groupbox-item-"+item[opts.idAttr];var otherListNumber=listNumber==1?2:1;var $list=this.$groupbox.find("ul.group"+listNumber);var $otherList=this.$groupbox.find("ul.group"+otherListNumber);
var list=listNumber==1?opts.itemsList1:opts.itemsList2;this._trigger("beforeAdd",null,{"item":item,"list":list,"listElement":$list});list.push(item);this.itemsObject[id]=item;var $newItem=$('<li id="'+id+'" class="ui-state-default ui-groupbox-item ui-item-'+this.options.itemSize+'">'+item[opts.labelAttr]+"</li>");
$newItem.css(this.options.itemStyle);this._bindListItemEvents($newItem,$otherList);$list.append($newItem);this._trigger("afterAdd",null,{"item":item,"list":list,"listElement":$list});},removeItem:function(listNumber,item){var id=typeof item==="object"?item[this.options.idAttr]:item;var theItem=this.itemsObject["ui-groupbox-item-"+id];
var $list=this.$groupbox.find("ul.group"+listNumber);var $item=$list.children("#ui-groupbox-item-"+id);this._trigger("beforeRemove",null,{"item":theItem,"list":list,"listElement":$list});if(theItem&&$item.length){var list=this.options["itemsList"+listNumber];list.splice($item.index(),1);delete this.itemsObject["ui-groupbox-item-"+id];
$item.remove();this._trigger("afterRemove",null,{"item":theItem,"list":list,"listElement":$list});}},enable:function(){this.$groupbox.find("ul.ui-groupbox-list").selectable("enable");this.$groupbox.find("div.ui-groupbox-buttons button").button("enable");this.$groupbox.find("div.ui-groupbox-scroll").css("overflow-y","scroll");
$.Widget.prototype.enable.call(this);this._trigger("enable",null,this.element);},disable:function(){this.$groupbox.find("ul.ui-groupbox-list").selectable("disable");this.$groupbox.find("div.ui-groupbox-buttons button").button("disable");this.$groupbox.find("div.ui-groupbox-scroll").css("overflow-y","hidden");
$.Widget.prototype.disable.call(this);this._trigger("disable",null,this.element);},destroy:function(){var $groupbox=this.$groupbox;$groupbox.empty();$groupbox.siblings("div.ui-groupbox-clear").remove();$groupbox.removeClass("ui-groupbox");$.Widget.prototype.destroy.call(this);}});})(jQuery);(function(a,b){a.widget("uiplugins.textarea",{options:{"maxChars":-1,"charLimitMessage":"","pasteFlickerFix":true,"limitMessageStyle":{},"limitMessageClass":""},_create:function(){var c=this.options,d=this.element;
d.addClass("ui-textarea");this.$textarea=d;if(c.maxChars&&c.charLimitMessage){this._renderLimitMessage();}if(typeof c.maxChars==="function"||Number(c.maxChars)>=0){this._initCharLimit();}},_setOption:function(c,e){a.Widget.prototype._setOption.apply(this,arguments);var d=this.options;switch(c){case"maxChars":this._setMaxChars(e);
break;case"charLimitMessage":if(e){this.refresh();}break;case"limitMessageStyle":if(typeof d.limitMessageStyle==="string"){d.limitMessageStyle=a.parseJSON(d.limitMessageStyle);}this.$limitMessage.css(d.limitMessageStyle);break;case"limitMessageClass":d.limitMessageClass+=" ui-char-limit-message";this.$limitMessage.attr("class",d.limitMessageClass);
break;}},_renderLimitMessage:function(){var e=this.$textarea;var d=this.options;var c=a('<div class="ui-char-limit-message"></div>').insertAfter(e);c.css(d.limitMessageStyle);c.addClass(d.limitMessageClass);e.parent("div").css("margin-bottom",c.height()+"px");this.$limitMessage=c;},_getLimitMessageLoc:function(){var d=this.$textarea;
var c=d.offset();c.top+=a.browser.msie?d.height()+7:d.height()+3;c.left+=2;return c;},_handleKeyPress:function(d){this._trigger("beforeChange",d,this.element);var k=this;var c=this.options;var g=typeof c.maxChars==="function"?c.maxChars.apply():c.maxChars;var i=d.which;var h=k._getValueData();var e=h.beforeCursor+String.fromCharCode(i)+this.afterCursor();
var f=(i>=a.ui.keyCode.SHIFT&&i<=a.ui.keyCode.CAPS_LOCK)||i==a.ui.keyCode.ESCAPE||(i>a.ui.keyCode.SPACE&&i<=a.ui.keyCode.DOWN)||i==a.ui.keyCode.INSERT||(i>=a.ui.keyCode.COMMAND&&i<=a.ui.keyCode.COMMAND_RIGHT)||(i>=a.ui.keyCode.NUM_LOCK&&i<=a.ui.keyCode.SCROLL_LOCK);var j=i==0||i==a.ui.keyCode.BACKSPACE||i==a.ui.keyCode.DELETE||(d.ctrlKey&&i==a.ui.keyCode.A);
if(!(f||j)){if(e.length>g){return false;}}if(!f){setTimeout(function(){k._trigger("afterChange",d,k.element);},0);}},_handlePaste:function(h){this._trigger("beforeChange",h,this.element);var f=this;var e=f._getValueData();var g=f.options;var c=typeof g.maxChars==="function"?g.maxChars.apply():g.maxChars;
var j=f.$textarea;var i=null;if(g.pasteFlickerFix&&g.pasteFlickerFix!=="false"){var d=f._getPasteFixLocation();i=a('<textarea rows="'+j.attr("rows")+'" cols="'+j.attr("cols")+'"></textarea>').addClass(j.attr("class")).css({"position":"absolute","top":d.top,"left":d.left}).insertAfter(j).val(e.text);}setTimeout(function(){var k=j.val();
var m=k.substring(e.beforeCursor.length,k.length-e.afterCursor.length);if(k.length>c){var l=m.substring(0,c-e.beforeCursor.length-e.afterCursor.length);j.val(e.beforeCursor+l+e.afterCursor);}j.caret({"start":e.beforeCursor.length,"end":f._getValueData().text.length-e.afterCursor.length});if(i){i.remove();
}f.refresh(h);f._trigger("afterChange",h,f.element);},0);},_getPasteFixLocation:function(){var c=this.$textarea.offset();if(a.browser.webkit){c.top-=2;c.left-=2;}else{if(a.browser.mozilla){c.top-=1;}}return c;},_showCharLimitMessage:function(){var d=this.options;var g=this.$textarea;var c=typeof d.maxChars==="function"?d.maxChars.apply():d.maxChars;
var e=g.val().length;var f=d.charLimitMessage.replace("{MAX}",c).replace("{ENTERED}",e).replace("{REMAINING}",c-e);g.next("div.ui-char-limit-message").text(f);},_setMaxChars:function(c){var e=this.$textarea;var d=e.val();if(d.length>Number(c)){e.val(d.substring(0,c));}this.refresh();},_initCharLimit:function(){var c=this;
var d=c.options;var e=c.$textarea;e.keydown(function(f){return c._handleKeyPress(f);});e.bind("paste",function(f){c._handlePaste(f);});if(d.charLimitMessage){c._showCharLimitMessage();e.keyup(function(g){var f=g.which;if(!c._ignoreKeyPress(f)){c.refresh(g);}});}},_getValueData:function(){var e=this.$textarea;
var c=e.caret();var d=e.val();return{"selection":c,"text":d,"beforeCursor":d.substring(0,c.start),"afterCursor":d.substring(c.end)};},_ignoreKeyPress:function(c){return c==a.ui.keyCode.ALT||c==a.ui.keyCode.CAPS_LOCK||c==a.ui.keyCode.COMMAND||c==a.ui.keyCode.COMMAND_LEFT||c==a.ui.keyCode.COMMAND_RIGHT||c==a.ui.keyCode.CONTROL||c==a.ui.keyCode.DOWN||c==a.ui.keyCode.END||c==a.ui.keyCode.ESCAPE||c==a.ui.keyCode.HOME||c==a.ui.keyCode.INSERT||c==a.ui.keyCode.LEFT||c==a.ui.keyCode.PAGE_DOWN||c==a.ui.keyCode.PAGE_UP||c==a.ui.keyCode.RIGHT||c==a.ui.keyCode.SHIFT||c==a.ui.keyCode.UP;
},refresh:function(c){this._showCharLimitMessage();},selectedText:function(d,c){if(a.isNumeric(d)&&a.isNumeric(c)){this.$textarea.caret({"start":Number(d),"end":Number(c)});}else{return this.$textarea.caret().text;}},selectionStart:function(){return this.$textarea.caret().start;},selectionEnd:function(){return this.$textarea.caret().end;
},replaceSelection:function(d){var c=this.$textarea.caret();if(c.start!=c.end){this.$textarea.val(c.replace(d));this.selectedText(c.start,c.start+d.length);this.refresh();}},beforeCursor:function(){return this._getValueData().beforeCursor;},afterCursor:function(){return this._getValueData().afterCursor;
},remaining:function(){var d=this.options;var c=typeof d.maxChars==="function"?d.maxChars.apply():d.maxChars;var e=this.$textarea.val().length;return c-e;},enable:function(){this.element.removeAttr("disabled");a.Widget.prototype.enable.call(this);this._trigger("enable",null,this.element);},disable:function(){this.element.attr("disabled","disabled");
a.Widget.prototype.disable.call(this);this._trigger("disable",null,this.element);},destroy:function(){var c=this.$textarea;c.unbind();c.removeClass("ui-textarea");if(this.options.charLimitMessage){c.next(".ui-char-limit-message").remove();}a.Widget.prototype.destroy.call(this);}});})(jQuery);(function(c,a,b,d){c.fn.caret=function(v,o){var f,i,q=this[0],k=c.browser.msie,u,m;
if(typeof v==="object"&&typeof v.start==="number"&&typeof v.end==="number"){f=v.start;i=v.end;}else{if(typeof v==="number"&&typeof o==="number"){f=v;i=o;}else{if(typeof v==="string"){if((f=q.value.indexOf(v))>-1){i=f+v[a];}else{f=null;}}else{if(Object.prototype.toString.call(v)==="[object RegExp]"){var p=v.exec(q.value);
if(p!=null){f=p.index;i=f+p[0][a];}}}}}if(typeof f!="undefined"){if(k){var l=this[0].createTextRange();l.collapse(true);l.moveStart("character",f);l.moveEnd("character",i-f);l.select();}else{this[0].selectionStart=f;this[0].selectionEnd=i;}this[0].focus();return this;}else{if(k){var n=document.selection;
if(this[0].tagName.toLowerCase()!="textarea"){var g=this.val(),j=n[b]()[d]();j.moveEnd("character",g[a]);u=(j.text==""?g[a]:g.lastIndexOf(j.text));j=n[b]()[d]();j.moveStart("character",-g[a]);m=j.text[a];}else{j=n[b](),stored_range=j[d]();stored_range.moveToElementText(this[0]);stored_range.setEndPoint("EndToEnd",j);
u=stored_range.text[a]-j.text[a],m=u+j.text[a];}}else{u=q.selectionStart,m=q.selectionEnd;}var h=q.value.substring(u,m);return{start:u,end:m,text:h,replace:function(s){var e=q.value.substring(0,u)+s+q.value.substring(m,q.value[a]);return e;}};}};})(jQuery,"length","createRange","duplicate");(function(a,b){a.widget("uiplugins.textinput",{options:{"allow":null,"blacklist":null,"filter":null,"stylize":false,"whitelist":null},_create:function(){var d=this;
d._initFilters();var c=this.options.stylize?"ui-text ui-state-default ui-corner-all":"ui-text";this.element.addClass(c);this.element.bind("keydown",function(f){var e=d._isValidKeyPress(f);if(!e.valid){d._trigger("keyEventSuppressed",f,{"key":e.key});}return e.valid;});},_isValidKeyPress:function(h){var e=true;
var c=h.which;var d=(c>=a.ui.keyCode.SHIFT&&c<=a.ui.keyCode.CAPS_LOCK)||c==a.ui.keyCode.ESCAPE||(c>a.ui.keyCode.SPACE&&c<=a.ui.keyCode.DOWN)||c==a.ui.keyCode.INSERT||(c>=a.ui.keyCode.COMMAND&&c<=a.ui.keyCode.COMMAND_RIGHT)||(c>=a.ui.keyCode.NUM_LOCK&&c<=a.ui.keyCode.SCROLL_LOCK);var g=c==0||c==a.ui.keyCode.BACKSPACE||c==a.ui.keyCode.DELETE||(h.ctrlKey&&c==a.ui.keyCode.A)||c==a.ui.keyCode.TAB;
var f=a.ui.keyCode.keyCode2Char(h.keyCode,h.shiftKey);if(!(d||g)){if(this.filterRegex){e=!f.match(this.filterRegex);}if(this.whitelistRegex){e=e&&!f.match(this.whitelistRegex);}else{if(this.allowRegex){e=e||!f.match(this.allowRegex);}}if(this.blacklistRegex){e=e&&!f.match(this.blacklistRegex);}}return{"valid":e,"key":f};
},_initFilters:function(){switch(this.options.filter){case"numeric":this.filterRegex=new RegExp("[^0-9.]");break;case"digits":this.filterRegex=new RegExp("[^0-9]");break;case"alpha":this.filterRegex=new RegExp("[^a-zA-Z]");break;}this.allowRegex=this._createCharsRegEx(this.options.allow,true);this.whitelistRegex=this._createCharsRegEx(this.options.whitelist,true);
this.blacklistRegex=this._createCharsRegEx(this.options.blacklist,false);},_createCharsRegEx:function(d,e){var c=null;if(d&&d.length){if(d instanceof Array){d=d.join("");}c=new RegExp("["+(e?"^":"")+d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"]");}return c;},_setOption:function(c,d){a.Widget.prototype._setOption.apply(this,arguments);
if(c=="stylize"){if(d&&d!=="false"){this.element.addClass("ui-state-default ui-corner-all");}else{this.element.removeClass("ui-state-default ui-corner-all");}}else{this._initFilters();}},enable:function(){this.element.removeAttr("disabled");a.Widget.prototype.enable.call(this);this._trigger("enable",null,this.element);
},disable:function(){this.element.attr("disabled","disabled");a.Widget.prototype.disable.call(this);this._trigger("disable",null,this.element);},destroy:function(){this.element.removeClass("ui-text");this.element.unbind();}});})(jQuery);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};
Date.getMonthNumberFromName=function(b){var e=Date.CultureInfo.monthNames,a=Date.CultureInfo.abbreviatedMonthNames,d=b.toLowerCase();for(var c=0;c<e.length;c++){if(e[c].toLowerCase()==d||a[c].toLowerCase()==d){return c;}}return -1;};Date.getDayNumberFromName=function(b){var f=Date.CultureInfo.dayNames,a=Date.CultureInfo.abbreviatedDayNames,e=Date.CultureInfo.shortestDayNames,d=b.toLowerCase();
for(var c=0;c<f.length;c++){if(f[c].toLowerCase()==d||a[c].toLowerCase()==d){return c;}}return -1;};Date.isLeapYear=function(a){return(((a%4===0)&&(a%100!==0))||(a%400===0));};Date.getDaysInMonth=function(a,b){return[31,(Date.isLeapYear(a)?29:28),31,30,31,30,31,31,30,31,30,31][b];};Date.getTimezoneOffset=function(a,b){return(b||false)?Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()];
};Date.getTimezoneAbbreviation=function(b,d){var c=(d||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,a;for(a in c){if(c[a]===b){return a;}}return null;};Date.prototype.clone=function(){return new Date(this.getTime());};Date.prototype.compareTo=function(a){if(isNaN(this)){throw new Error(this);
}if(a instanceof Date&&!isNaN(a)){return(this>a)?1:(this<a)?-1:0;}else{throw new TypeError(a);}};Date.prototype.equals=function(a){return(this.compareTo(a)===0);};Date.prototype.between=function(c,a){var b=this.getTime();return b>=c.getTime()&&b<=a.getTime();};Date.prototype.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);
return this;};Date.prototype.addSeconds=function(a){return this.addMilliseconds(a*1000);};Date.prototype.addMinutes=function(a){return this.addMilliseconds(a*60000);};Date.prototype.addHours=function(a){return this.addMilliseconds(a*3600000);};Date.prototype.addDays=function(a){return this.addMilliseconds(a*86400000);
};Date.prototype.addWeeks=function(a){return this.addMilliseconds(a*604800000);};Date.prototype.addMonths=function(a){var b=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+a);this.setDate(Math.min(b,this.getDaysInMonth()));return this;};Date.prototype.addYears=function(a){return this.addMonths(a*12);
};Date.prototype.add=function(b){if(typeof b=="number"){this._orient=b;return this;}var a=b;if(a.millisecond||a.milliseconds){this.addMilliseconds(a.millisecond||a.milliseconds);}if(a.second||a.seconds){this.addSeconds(a.second||a.seconds);}if(a.minute||a.minutes){this.addMinutes(a.minute||a.minutes);
}if(a.hour||a.hours){this.addHours(a.hour||a.hours);}if(a.month||a.months){this.addMonths(a.month||a.months);}if(a.year||a.years){this.addYears(a.year||a.years);}if(a.day||a.days){this.addDays(a.day||a.days);}return this;};Date._validate=function(d,c,a,b){if(typeof d!="number"){throw new TypeError(d+" is not a Number.");
}else{if(d<c||d>a){throw new RangeError(d+" is not a valid value for "+b+".");}}return true;};Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds");};Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds");};Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes");
};Date.validateHour=function(a){return Date._validate(a,0,23,"hours");};Date.validateDay=function(c,a,b){return Date._validate(c,1,Date.getDaysInMonth(a,b),"days");};Date.validateMonth=function(a){return Date._validate(a,0,11,"months");};Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds");
};Date.prototype.set=function(b){var a=b;if(!a.millisecond&&a.millisecond!==0){a.millisecond=-1;}if(!a.second&&a.second!==0){a.second=-1;}if(!a.minute&&a.minute!==0){a.minute=-1;}if(!a.hour&&a.hour!==0){a.hour=-1;}if(!a.day&&a.day!==0){a.day=-1;}if(!a.month&&a.month!==0){a.month=-1;}if(!a.year&&a.year!==0){a.year=-1;
}if(a.millisecond!=-1&&Date.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds());}if(a.second!=-1&&Date.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds());}if(a.minute!=-1&&Date.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes());
}if(a.hour!=-1&&Date.validateHour(a.hour)){this.addHours(a.hour-this.getHours());}if(a.month!==-1&&Date.validateMonth(a.month)){this.addMonths(a.month-this.getMonth());}if(a.year!=-1&&Date.validateYear(a.year)){this.addYears(a.year-this.getFullYear());}if(a.day!=-1&&Date.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate());
}if(a.timezone){this.setTimezone(a.timezone);}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset);}return this;};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};Date.prototype.isLeapYear=function(){var a=this.getFullYear();
return(((a%4===0)&&(a%100!==0))||(a%400===0));};Date.prototype.isWeekday=function(){return !(this.is().sat()||this.is().sun());};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth());};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1});
};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()});};Date.prototype.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||+1))%7;return this.addDays((c===0)?c+=7*(b||+1):c);};Date.prototype.moveToMonth=function(c,a){var b=(c-this.getMonth()+12*(a||+1))%12;
return this.addMonths((b===0)?b+=12*(a||+1):b);};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000);};Date.prototype.getWeekOfYear=function(a){var h=this.getFullYear(),c=this.getMonth(),f=this.getDate();var j=a||Date.CultureInfo.firstDayOfWeek;var e=7+1-new Date(h,0,1).getDay();
if(e==8){e=1;}var b=((Date.UTC(h,c,f,0,0,0)-Date.UTC(h,0,1,0,0,0))/86400000)+1;var i=Math.floor((b-e+7)/7);if(i===j){h--;var g=7+1-new Date(h,0,1).getDay();if(g==2||g==8){i=53;}else{i=52;}}return i;};Date.prototype.isDST=function(){console.log("isDST");return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D";
};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST());};Date.prototype.setTimezoneOffset=function(b){var a=this.getTimezoneOffset(),c=Number(b)*-6/10;this.addMinutes(c-a);return this;};Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a));
};Date.prototype.getUTCOffset=function(){var b=this.getTimezoneOffset()*-10/6,a;if(b<0){a=(b-10000).toString();return a[0]+a.substr(2);}else{a=(b+10000).toString();return"+"+a.substr(1);}};Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()];
};Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()];};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(c){var a=this;var b=function b(d){return(d.toString().length==1)?"0"+d:d;
};return c?c.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(d){switch(d){case"hh":return b(a.getHours()<13?a.getHours():(a.getHours()-12));case"h":return a.getHours()<13?a.getHours():(a.getHours()-12);case"HH":return b(a.getHours());case"H":return a.getHours();case"mm":return b(a.getMinutes());
case"m":return a.getMinutes();case"ss":return b(a.getSeconds());case"s":return a.getSeconds();case"yyyy":return a.getFullYear();case"yy":return a.getFullYear().toString().substring(2,4);case"dddd":return a.getDayName();case"ddd":return a.getDayName(true);case"dd":return b(a.getDate());case"d":return a.getDate().toString();
case"MMMM":return a.getMonthName();case"MMM":return a.getMonthName(true);case"MM":return b((a.getMonth()+1));case"M":return a.getMonth()+1;case"t":return a.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return a.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;
case"zzz":case"zz":case"z":return"";}}):this._toString();};Date.now=function(){return new Date();};Date.today=function(){return Date.now().clearTime();};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this;};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;
return this;};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this;};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var a={};a[this._dateElement]=this;return Date.now().add(a);};Number.prototype.ago=function(){var a={};a[this._dateElement]=this*-1;return Date.now().add(a);
};(function(){var g=Date.prototype,a=Number.prototype;var p=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),o=("january february march april may june july august september october november december").split(/\s/),n=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),m;
var l=function(i){return function(){if(this._is){this._is=false;return this.getDay()==i;}return this.moveToDayOfWeek(i,this._orient);};};for(var f=0;f<p.length;f++){g[p[f]]=g[p[f].substring(0,3)]=l(f);}var h=function(i){return function(){if(this._is){this._is=false;return this.getMonth()===i;}return this.moveToMonth(i,this._orient);
};};for(var d=0;d<o.length;d++){g[o[d]]=g[o[d].substring(0,3)]=h(d);}var e=function(i){return function(){if(i.substring(i.length-1)!="s"){i+="s";}return this["add"+i](this._orient);};};var b=function(i){return function(){this._dateElement=i;return this;};};for(var c=0;c<n.length;c++){m=n[c].toLowerCase();
g[m]=g[m+"s"]=e(n[c]);a[m]=a[m+"s"]=b(m);}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ");};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern);};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern);
};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern);};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern);};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";
case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};(function(){Date.Parsing={Exception:function(i){this.message="Parse error at '"+i.substring(0,10)+" ...'";}};var a=Date.Parsing;var c=a.Operators={rtoken:function(i){return function(j){var k=j.match(i);if(k){return([k[0],j.substring(k[0].length)]);
}else{throw new a.Exception(j);}};},token:function(i){return function(j){return c.rtoken(new RegExp("^s*"+j+"s*"))(j);};},stoken:function(i){return c.rtoken(new RegExp("^"+i));},until:function(i){return function(j){var k=[],m=null;while(j.length){try{m=i.call(this,j);}catch(l){k.push(m[0]);j=m[1];continue;
}break;}return[k,j];};},many:function(i){return function(j){var m=[],k=null;while(j.length){try{k=i.call(this,j);}catch(l){return[m,j];}m.push(k[0]);j=k[1];}return[m,j];};},optional:function(i){return function(j){var k=null;try{k=i.call(this,j);}catch(l){return[null,j];}return[k[0],k[1]];};},not:function(i){return function(j){try{i.call(this,j);
}catch(k){return[null,j];}throw new a.Exception(j);};},ignore:function(i){return i?function(j){var k=null;k=i.call(this,j);return[null,k[1]];}:null;},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(c.each(k[j],l));}return m;},cache:function(k){var i={},j=null;
return function(l){try{j=i[l]=(i[l]||k.call(this,l));}catch(m){j=i[l]=m;}if(j instanceof a.Exception){throw j;}else{return j;}};},any:function(){var i=arguments;return function(k){var l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue;}try{l=(i[j].call(this,k));}catch(m){l=null;}if(l){return l;
}}throw new a.Exception(k);};},each:function(){var i=arguments;return function(k){var n=[],l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue;}try{l=(i[j].call(this,k));}catch(m){throw new a.Exception(k);}n.push(l[0]);k=l[1];}return[n,k];};},all:function(){var j=arguments,i=i;return i.each(i.optional(j));
},sequence:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;if(i.length==1){return i[0];}return function(o){var p=null,t=null;var v=[];for(var n=0;n<i.length;n++){try{p=i[n].call(this,o);}catch(u){break;}v.push(p[0]);try{t=j.call(this,p[1]);}catch(m){t=null;break;}o=t[1];}if(!p){throw new a.Exception(o);
}if(t){throw new a.Exception(t[1]);}if(k){try{p=k.call(this,p[1]);}catch(l){throw new a.Exception(p[1]);}}return[v,(p?p[1]:o)];};},between:function(j,k,i){i=i||j;var l=c.each(c.ignore(j),k,c.ignore(i));return function(m){var n=l.call(this,m);return[[n[0][0],r[0][2]],n[1]];};},list:function(i,j,k){j=j||c.rtoken(/^\s*/);
k=k||null;return(i instanceof Array?c.each(c.product(i.slice(0,-1),c.ignore(j)),i.slice(-1),c.ignore(k)):c.each(c.many(c.each(i,c.ignore(j))),px,c.ignore(k)));},set:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;return function(B){var l=null,n=null,m=null,o=null,t=[[],B],A=false;for(var v=0;v<i.length;
v++){m=null;n=null;l=null;A=(i.length==1);try{l=i[v].call(this,B);}catch(y){continue;}o=[[l[0]],l[1]];if(l[1].length>0&&!A){try{m=j.call(this,l[1]);}catch(z){A=true;}}else{A=true;}if(!A&&m[1].length===0){A=true;}if(!A){var w=[];for(var u=0;u<i.length;u++){if(v!=u){w.push(i[u]);}}n=c.set(w,j).call(this,m[1]);
if(n[0].length>0){o[0]=o[0].concat(n[0]);o[1]=n[1];}}if(o[1].length<t[1].length){t=o;}if(t[1].length===0){break;}}if(t[0].length===0){return t;}if(k){try{m=k.call(this,t[1]);}catch(x){throw new a.Exception(t[1]);}t[1]=m[1];}return t;};},forward:function(i,j){return function(k){return i[j].call(this,k);
};},replace:function(j,i){return function(k){var l=j.call(this,k);return[i,l[1]];};},process:function(j,i){return function(k){var l=j.call(this,k);return[i.call(this,l[0]),l[1]];};},min:function(i,j){return function(k){var l=j.call(this,k);if(l[0].length<i){throw new a.Exception(k);}return l;};}};var h=function(i){return function(){var j=null,m=[];
if(arguments.length>1){j=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){j=arguments[0];}}if(j){for(var l=0,k=j.shift();l<k.length;l++){j.unshift(k[l]);m.push(i.apply(null,j));j.shift();return m;}}else{return i.apply(null,arguments);}};};var g="optional not ignore cache".split(/\s/);
for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]]);}var f=function(i){return function(){if(arguments[0] instanceof Array){return i.apply(null,arguments[0]);}else{return i.apply(null,arguments);}};};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]]);}}());(function(){var f=function(j){var k=[];
for(var g=0;g<j.length;g++){if(j[g] instanceof Array){k=k.concat(f(j[g]));}else{if(j[g]){k.push(j[g]);}}}return k;};Date.Grammar={};Date.Translator={hour:function(g){return function(){this.hour=Number(g);};},minute:function(g){return function(){this.minute=Number(g);};},second:function(g){return function(){this.second=Number(g);
};},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase();};},timezone:function(g){return function(){var j=g.replace(/[^\d\+\-]/g,"");if(j.length){this.timezoneOffset=Number(j);}else{this.timezone=g.toLowerCase();}};},day:function(g){var j=g[0];return function(){this.day=Number(j.match(/\d+/)[0]);
};},month:function(g){return function(){this.month=((g.length==3)?Date.getMonthNumberFromName(g):(Number(g)-1));};},year:function(g){return function(){var j=Number(g);this.year=((g.length>2)?j:(j+(((j+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)));};},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;
break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(g){g=(g instanceof Array)?g:[g];var j=new Date();this.year=j.getFullYear();this.month=j.getMonth();this.day=1;this.hour=0;this.minute=0;this.second=0;for(var k=0;k<g.length;
k++){if(g[k]){g[k].call(this);}}this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var l=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);
if(this.timezone){l.set({timezone:this.timezone});}else{if(this.timezoneOffset){l.set({timezoneOffset:this.timezoneOffset});}}return l;},finish:function(g){g=(g instanceof Array)?f(g):[g];if(g.length===0){return null;}for(var m=0;m<g.length;m++){if(typeof g[m]=="function"){g[m].call(this);}}if(this.now){return new Date();
}var j=Date.today();var p=null;var n=!!(this.days!=null||this.orient||this.operator);if(n){var o,l,k;k=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";o=(Date.getDayNumberFromName(this.weekday)-j.getDay());l=7;this.days=o?((o+(k*l))%l):(k*l);}if(this.month){this.unit="month";
o=(this.month-j.getMonth());l=12;this.months=o?((o+(k*l))%l):(k*l);this.month=null;}if(!this.unit){this.unit="day";}if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}if(this.unit=="week"){this.unit="day";this.value=this.value*7;}this[this.unit+"s"]=this.value*k;}return j.add(this);
}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour;}if(this.weekday&&!this.day){this.day=(j.addDays((Date.getDayNumberFromName(this.weekday)-j.getDay()))).getDate();}if(this.month&&!this.day){this.day=1;}return j.set(this);}}};var b=Date.Parsing.Operators,e=Date.Grammar,d=Date.Translator,i;
e.datePartDelimiter=b.rtoken(/^([\s\-\.\,\/\x27]+)/);e.timePartDelimiter=b.stoken(":");e.whiteSpace=b.rtoken(/^\s*/);e.generalDelimiter=b.rtoken(/^(([\s\,]|at|on)+)/);var a={};e.ctoken=function(m){var l=a[m];if(!l){var n=Date.CultureInfo.regexPatterns;var k=m.split(/\s+/),j=[];for(var g=0;g<k.length;
g++){j.push(b.replace(b.rtoken(n[k[g]]),k[g]));}l=a[m]=b.any.apply(null,j);}return l;};e.ctoken2=function(g){return b.rtoken(Date.CultureInfo.regexPatterns[g]);};e.h=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),d.hour));e.hh=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/),d.hour));e.H=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),d.hour));
e.HH=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/),d.hour));e.m=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.minute));e.mm=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.minute));e.s=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.second));e.ss=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.second));
e.hms=b.cache(b.sequence([e.H,e.mm,e.ss],e.timePartDelimiter));e.t=b.cache(b.process(e.ctoken2("shortMeridian"),d.meridian));e.tt=b.cache(b.process(e.ctoken2("longMeridian"),d.meridian));e.z=b.cache(b.process(b.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),d.timezone));e.zz=b.cache(b.process(b.rtoken(/^(\+|\-)\s*\d\d\d\d/),d.timezone));
e.zzz=b.cache(b.process(e.ctoken2("timezone"),d.timezone));e.timeSuffix=b.each(b.ignore(e.whiteSpace),b.set([e.tt,e.zzz]));e.time=b.each(b.optional(b.ignore(b.stoken("T"))),e.hms,e.timeSuffix);e.d=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/),b.optional(e.ctoken2("ordinalSuffix"))),d.day));
e.dd=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/),b.optional(e.ctoken2("ordinalSuffix"))),d.day));e.ddd=e.dddd=b.cache(b.process(e.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g;};}));e.M=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/),d.month));e.MM=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),d.month));
e.MMM=e.MMMM=b.cache(b.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),d.month));e.y=b.cache(b.process(b.rtoken(/^(\d\d?)/),d.year));e.yy=b.cache(b.process(b.rtoken(/^(\d\d)/),d.year));e.yyy=b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/),d.year));e.yyyy=b.cache(b.process(b.rtoken(/^(\d\d\d\d)/),d.year));
i=function(){return b.each(b.any.apply(null,arguments),b.not(e.ctoken2("timeContext")));};e.day=i(e.d,e.dd);e.month=i(e.M,e.MMM);e.year=i(e.yyyy,e.yy);e.orientation=b.process(e.ctoken("past future"),function(g){return function(){this.orient=g;};});e.operator=b.process(e.ctoken("add subtract"),function(g){return function(){this.operator=g;
};});e.rday=b.process(e.ctoken("yesterday tomorrow today now"),d.rday);e.unit=b.process(e.ctoken("minute hour day week month year"),function(g){return function(){this.unit=g;};});e.value=b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"");};});e.expression=b.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM]);
i=function(){return b.set(arguments,e.datePartDelimiter);};e.mdy=i(e.ddd,e.month,e.day,e.year);e.ymd=i(e.ddd,e.year,e.month,e.day);e.dmy=i(e.ddd,e.day,e.month,e.year);e.date=function(g){return((e[Date.CultureInfo.dateElementOrder]||e.mdy).call(this,g));};e.format=b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(e[g]){return e[g];
}else{throw Date.Parsing.Exception(g);}}),b.process(b.rtoken(/^[^dMyhHmstz]+/),function(g){return b.ignore(b.stoken(g));}))),function(g){return b.process(b.each.apply(null,g),d.finishExact);});var h={};var c=function(g){return h[g]=(h[g]||e.format(g)[0]);};e.formats=function(j){if(j instanceof Array){var k=[];
for(var g=0;g<j.length;g++){k.push(c(j[g]));}return b.any.apply(null,k);}else{return c(j);}};e._formats=e.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);e._start=b.process(b.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),d.finish);
e.start=function(g){try{var j=e._formats.call({},g);if(j[1].length===0){return j;}}catch(k){}return e._start.call({},g);};}());Date._parse=Date.parse;Date.parse=function(a){var b=null;if(!a){return null;}try{b=Date.Grammar.start.call({},a);}catch(c){return null;}return((b[1].length===0)?b[0]:null);};
Date.getParseFunction=function(b){var a=Date.Grammar.formats(b);return function(c){var d=null;try{d=a.call({},c);}catch(f){return null;}return((d[1].length===0)?d[0]:null);};};Date.parseExact=function(a,b){return Date.getParseFunction(b)(a);};
/* 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(d){d.fn.drag=function(c,f,i){var h=typeof c=="string"?c:"",g=d.isFunction(c)?c:d.isFunction(f)?f:null;
if(h.indexOf("drag")!==0){h="drag"+h;}i=(c==g?f:i)||{};return g?this.bind(h,i,g):this.trigger(h);};var a=d.event,b=a.special,e=b.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(c){var f=d.data(this,e.datakey),g=c.data||{};
f.related+=1;if(!f.live&&c.selector){f.live=true;a.add(this,"draginit."+e.livekey,e.delegate);}d.each(e.defaults,function(h){if(g[h]!==undefined){f[h]=g[h];}});},remove:function(){d.data(this,e.datakey).related-=1;},setup:function(){if(!d.data(this,e.datakey)){var c=d.extend({related:0},e.defaults);d.data(this,e.datakey,c);
a.add(this,"mousedown",e.init,c);this.attachEvent&&this.attachEvent("ondragstart",e.dontstart);}},teardown:function(){if(!d.data(this,e.datakey).related){d.removeData(this,e.datakey);a.remove(this,"mousedown",e.init);a.remove(this,"draginit",e.delegate);e.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",e.dontstart);
}},init:function(c){var f=c.data,g;if(!(f.which>0&&c.which!=f.which)){if(!d(c.target).is(f.not)){if(!(f.handle&&!d(c.target).closest(f.handle,c.currentTarget).length)){f.propagates=1;f.interactions=[e.interaction(this,f)];f.target=c.target;f.pageX=c.pageX;f.pageY=c.pageY;f.dragging=null;g=e.hijack(c,"draginit",f);
if(f.propagates){if((g=e.flatten(g))&&g.length){f.interactions=[];d.each(g,function(){f.interactions.push(e.interaction(this,f));});}f.propagates=f.interactions.length;f.drop!==false&&b.drop&&b.drop.handler(c,f);e.textselect(false);a.add(document,"mousemove mouseup",e.handler,f);return false;}}}}},interaction:function(c,f){return{drag:c,callback:new e.callback,droppable:[],offset:d(c)[f.relative?"position":"offset"]()||{top:0,left:0}};
},handler:function(c){var f=c.data;switch(c.type){case !f.dragging&&"mousemove":if(Math.pow(c.pageX-f.pageX,2)+Math.pow(c.pageY-f.pageY,2)<Math.pow(f.distance,2)){break;}c.target=f.target;e.hijack(c,"dragstart",f);if(f.propagates){f.dragging=true;}case"mousemove":if(f.dragging){e.hijack(c,"drag",f);if(f.propagates){f.drop!==false&&b.drop&&b.drop.handler(c,f);
break;}c.type="mouseup";}case"mouseup":a.remove(document,"mousemove mouseup",e.handler);if(f.dragging){f.drop!==false&&b.drop&&b.drop.handler(c,f);e.hijack(c,"dragend",f);}e.textselect(true);if(f.click===false&&f.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false;
},20);f.dragging=false;}break;}},delegate:function(c){var f=[],h,g=d.data(this,"events")||{};d.each(g.live||[],function(i,l){if(l.preType.indexOf("drag")===0){if(h=d(c.target).closest(l.selector,c.currentTarget)[0]){a.add(h,l.origType+"."+e.livekey,l.origHandler,l.data);d.inArray(h,f)<0&&f.push(h);}}});
if(!f.length){return false;}return d(f).bind("dragend."+e.livekey,function(){a.remove(this,"."+e.livekey);});},hijack:function(v,w,u,t,p){if(u){var q={event:v.originalEvent,type:v.type},f=w.indexOf("drop")?"drag":"drop",i,c=t||0,s,h;t=!isNaN(t)?t:u.interactions.length;v.type=w;v.originalEvent=null;u.results=[];
do{if(s=u.interactions[c]){if(!(w!=="dragend"&&s.cancelled)){h=e.properties(v,u,s);s.results=[];d(p||s[f]||u.droppable).each(function(g,j){i=(h.target=j)?a.handle.call(j,v,h):null;if(i===false){if(f=="drag"){s.cancelled=true;u.propagates-=1;}if(w=="drop"){s[f][g]=null;}}else{if(w=="dropinit"){s.droppable.push(e.element(i)||j);
}}if(w=="dragstart"){s.proxy=d(e.element(i)||s.drag)[0];}s.results.push(i);delete v.result;if(w!=="dropinit"){return i;}});u.results[c]=e.flatten(s.results);if(w=="dropinit"){s.droppable=e.flatten(s.droppable);}w=="dragstart"&&!s.cancelled&&h.update();}}}while(++c<t);v.type=q.type;v.originalEvent=q.event;
return e.flatten(u.results);}},properties:function(c,f,h){var g=h.callback;g.drag=h.drag;g.proxy=h.proxy||h.drag;g.startX=f.pageX;g.startY=f.pageY;g.deltaX=c.pageX-f.pageX;g.deltaY=c.pageY-f.pageY;g.originalX=h.offset.left;g.originalY=h.offset.top;g.offsetX=c.pageX-(f.pageX-g.originalX);g.offsetY=c.pageY-(f.pageY-g.originalY);
g.drop=e.flatten((h.drop||[]).slice());g.available=e.flatten((h.droppable||[]).slice());return g;},element:function(c){if(c&&(c.jquery||c.nodeType==1)){return c;}},flatten:function(c){return d.map(c,function(f){return f&&f.jquery?d.makeArray(f):f&&f.length?e.flatten(f):f;});},textselect:function(c){d(document)[c?"unbind":"bind"]("selectstart",e.dontstart).attr("unselectable",c?"off":"on").css("MozUserSelect",c?"":"none");
},dontstart:function(){return false;},callback:function(){}};e.callback.prototype={update:function(){b.drop&&this.available.length&&d.each(this.available,function(c){b.drop.locate(this,c);});}};b.draginit=b.dragstart=b.dragend=e;})(jQuery);
/* 
 * jquery.event.drop - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(e){e.fn.drop=function(j,b,i){var f=typeof j=="string"?j:"",h=e.isFunction(j)?j:e.isFunction(b)?b:null;
if(f.indexOf("drop")!==0){f="drop"+f;}i=(j==h?b:i)||{};return h?this.bind(f,i,h):this.trigger(f);};e.drop=function(b){b=b||{};a.multi=b.multi===true?Infinity:b.multi===false?1:!isNaN(b.multi)?b.multi:a.multi;a.delay=b.delay||a.delay;a.tolerance=e.isFunction(b.tolerance)?b.tolerance:b.tolerance===null?null:a.tolerance;
a.mode=b.mode||a.mode||"intersect";};var c=e.event,d=c.special,a=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",livekey:"livedrop",add:function(f){var b=e.data(this,a.datakey);b.related+=1;if(!b.live&&f.selector){b.live=true;c.add(this,"dropinit."+a.livekey,a.delegate);
}},remove:function(){e.data(this,a.datakey).related-=1;},setup:function(){if(!e.data(this,a.datakey)){e.data(this,a.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}});a.targets.push(this);}},teardown:function(){if(!e.data(this,a.datakey).related){e.removeData(this,a.datakey);c.remove(this,"dropinit",a.delegate);
var b=this;a.targets=e.grep(a.targets,function(f){return f!==b;});}},handler:function(g,b){var f;if(b){switch(g.type){case"mousedown":f=e(a.targets);if(typeof b.drop=="string"){f=f.filter(b.drop);}f.each(function(){var h=e.data(this,a.datakey);h.active=[];h.anyactive=0;h.winner=0;});b.droppable=f;a.delegates=[];
d.drag.hijack(g,"dropinit",b);a.delegates=e.unique(d.drag.flatten(a.delegates));break;case"mousemove":a.event=g;a.timer||a.tolerate(b);break;case"mouseup":a.timer=clearTimeout(a.timer);if(b.propagates){d.drag.hijack(g,"drop",b);d.drag.hijack(g,"dropend",b);e.each(a.delegates||[],function(){c.remove(this,"."+a.livekey);
});}break;}}},delegate:function(i){var b=[],h,f=e.data(this,"events")||{};e.each(f.live||[],function(j,g){if(g.preType.indexOf("drop")===0){h=e(i.currentTarget).find(g.selector);h.length&&h.each(function(){c.add(this,g.origType+"."+a.livekey,g.origHandler,g.data);e.inArray(this,b)<0&&b.push(this);});
}});a.delegates.push(b);return b.length?e(b):false;},locate:function(l,b){var k=e.data(l,a.datakey),i=e(l),j=i.offset()||{},f=i.outerHeight();i=i.outerWidth();j={elem:l,width:i,height:f,top:j.top,left:j.left,right:j.left+i,bottom:j.top+f};if(k){k.location=j;k.index=b;k.elem=l;}return j;},contains:function(f,b){return(b[0]||b.left)>=f.left&&(b[0]||b.right)<=f.right&&(b[1]||b.top)>=f.top&&(b[1]||b.bottom)<=f.bottom;
},modes:{intersect:function(g,b,f){return this.contains(f,[g.pageX,g.pageY])?1000000000:this.modes.overlap.apply(this,arguments);},overlap:function(g,b,f){return Math.max(0,Math.min(f.bottom,b.bottom)-Math.max(f.top,b.top))*Math.max(0,Math.min(f.right,b.right)-Math.max(f.left,b.left));},fit:function(g,b,f){return this.contains(f,b)?1:0;
},middle:function(g,b,f){return this.contains(f,[b.left+b.width*0.5,b.top+b.height*0.5])?1:0;}},sort:function(f,b){return b.winner-f.winner||f.index-b.index;},tolerate:function(x){var y,w,u,v,t,l,s=0,q,b=x.interactions.length,i=[a.event.pageX,a.event.pageY],f=a.tolerance||a.modes[a.mode];do{if(q=x.interactions[s]){if(!q){return;
}q.drop=[];t=[];l=q.droppable.length;if(f){u=a.locate(q.proxy);}y=0;do{if(w=q.droppable[y]){v=e.data(w,a.datakey);if(w=v.location){v.winner=f?f.call(a,a.event,u,w):a.contains(w,i)?1:0;t.push(v);}}}while(++y<l);t.sort(a.sort);y=0;do{if(v=t[y]){if(v.winner&&q.drop.length<a.multi){if(!v.active[s]&&!v.anyactive){if(d.drag.hijack(a.event,"dropstart",x,s,v.elem)[0]!==false){v.active[s]=1;
v.anyactive+=1;}else{v.winner=0;}}v.winner&&q.drop.push(v.elem);}else{if(v.active[s]&&v.anyactive==1){d.drag.hijack(a.event,"dropend",x,s,v.elem);v.active[s]=0;v.anyactive-=1;}}}}while(++y<l);}}while(++s<b);if(a.last&&i[0]==a.last.pageX&&i[1]==a.last.pageY){delete a.timer;}else{a.timer=setTimeout(function(){a.tolerate(x);
},a.delay);}a.last=a.event;}};d.dropinit=d.dropstart=d.dropend=a;})(jQuery);(function(b){b.extend(true,window,{"Slick":{"AutoTooltips":a}});function a(e){var d;var c=this;var i={maxToolTipLength:null};function h(j){e=b.extend(true,{},i,e);d=j;d.onMouseEnter.subscribe(g);}function f(){d.onMouseEnter.unsubscribe(g);
}function g(m,k){var j=d.getCellFromEvent(m);if(j){var l=d.getCellNode(j.row,j.cell);if(b(l).innerWidth()<l.scrollWidth){var n=b.trim(b(l).text());if(e.maxToolTipLength&&n.length>e.maxToolTipLength){n=n.substr(0,e.maxToolTipLength-3)+"...";}b(l).attr("title",n);}else{b(l).attr("title","");}}}b.extend(this,{"init":h,"destroy":f});
}})(jQuery);(function(b){b.extend(true,window,{"Slick":{"CellRangeDecorator":a}});function a(g,d){var f;var h={selectionCss:{"zIndex":"9999","border":"2px dashed red"}};d=b.extend(true,{},h,d);function c(i){if(!f){f=b("<div></div>",{css:d.selectionCss}).css("position","absolute").appendTo(g.getCanvasNode());
}var k=g.getCellNodeBox(i.fromRow,i.fromCell);var j=g.getCellNodeBox(i.toRow,i.toCell);f.css({top:k.top-1,left:k.left-1,height:j.bottom-k.top-2,width:j.right-k.left-2});return f;}function e(){if(f){f.remove();f=null;}}b.extend(this,{"show":c,"hide":e});}})(jQuery);(function(b){b.extend(true,window,{"Slick":{"CellRangeSelector":a}});
function a(p){var i;var g;var o;var d;var h=this;var m=new Slick.EventHandler();var e={selectionCss:{"border":"2px dashed blue"}};function n(q){p=b.extend(true,{},e,p);d=new Slick.CellRangeDecorator(q,p);i=q;g=i.getCanvasNode();m.subscribe(i.onDragInit,k).subscribe(i.onDragStart,f).subscribe(i.onDrag,c).subscribe(i.onDragEnd,j);
}function l(){m.unsubscribeAll();}function k(s,q){s.stopImmediatePropagation();}function f(t,s){var q=i.getCellFromEvent(t);if(h.onBeforeCellRangeSelected.notify(q)!==false){if(i.canCellBeSelected(q.row,q.cell)){o=true;t.stopImmediatePropagation();}}if(!o){return;}var u=i.getCellFromPoint(s.startX-b(g).offset().left,s.startY-b(g).offset().top);
s.range={start:u,end:{}};return d.show(new Slick.Range(u.row,u.cell));}function c(t,q){if(!o){return;}t.stopImmediatePropagation();var s=i.getCellFromPoint(t.pageX-b(g).offset().left,t.pageY-b(g).offset().top);if(!i.canCellBeSelected(s.row,s.cell)){return;}q.range.end=s;d.show(new Slick.Range(q.range.start.row,q.range.start.cell,s.row,s.cell));
}function j(s,q){if(!o){return;}o=false;s.stopImmediatePropagation();d.hide();h.onCellRangeSelected.notify({range:new Slick.Range(q.range.start.row,q.range.start.cell,q.range.end.row,q.range.end.cell)});}b.extend(this,{"init":n,"destroy":l,"onBeforeCellRangeSelected":new Slick.Event(),"onCellRangeSelected":new Slick.Event()});
}})(jQuery);(function(b){b.extend(true,window,{"Slick":{"CellSelectionModel":a}});function a(s){var l;var i;var g=[];var k=this;var e=new Slick.CellRangeSelector({"selectionCss":{"border":"2px solid black"}});var n;var f={selectActiveCell:true};function o(t){n=b.extend(true,{},f,s);l=t;i=l.getCanvasNode();
l.onActiveCellChanged.subscribe(h);t.registerPlugin(e);e.onCellRangeSelected.subscribe(p);e.onBeforeCellRangeSelected.subscribe(q);}function m(){l.onActiveCellChanged.unsubscribe(h);e.onCellRangeSelected.unsubscribe(p);e.onBeforeCellRangeSelected.unsubscribe(q);l.unregisterPlugin(e);}function d(u){var t=[];
for(var v=0;v<u.length;v++){var w=u[v];if(l.canCellBeSelected(w.fromRow,w.fromCell)&&l.canCellBeSelected(w.toRow,w.toCell)){t.push(w);}}return t;}function c(t){g=d(t);k.onSelectedRangesChanged.notify(g);}function j(){return g;}function q(u,t){if(l.getEditorLock().isActive()){u.stopPropagation();return false;
}}function p(u,t){c([t.range]);}function h(u,t){if(n.selectActiveCell&&t.row!=null&&t.cell!=null){c([new Slick.Range(t.row,t.cell)]);}}b.extend(this,{"getSelectedRanges":j,"setSelectedRanges":c,"init":o,"destroy":m,"onSelectedRangesChanged":new Slick.Event()});}})(jQuery);(function(c){c.extend(true,window,{"Slick":{"Event":h,"EventData":g,"EventHandler":i,"Range":b,"NonDataRow":e,"Group":f,"GroupTotals":d,"EditorLock":a,"GlobalEditorLock":new a()}});
function g(){var j=false;var k=false;this.stopPropagation=function(){j=true;};this.isPropagationStopped=function(){return j;};this.stopImmediatePropagation=function(){k=true;};this.isImmediatePropagationStopped=function(){return k;};}function h(){var j=[];this.subscribe=function(k){j.push(k);};this.unsubscribe=function(l){for(var k=j.length-1;
k>=0;k--){if(j[k]===l){j.splice(k,1);}}};this.notify=function(k,o,n){o=o||new g();n=n||this;var m;for(var l=0;l<j.length&&!(o.isPropagationStopped()||o.isImmediatePropagationStopped());l++){m=j[l].call(n,o,k);}return m;};}function i(){var j=[];this.subscribe=function(l,k){j.push({event:l,handler:k});
l.subscribe(k);return this;};this.unsubscribe=function(m,l){var k=j.length;while(k--){if(j[k].event===m&&j[k].handler===l){j.splice(k,1);m.unsubscribe(l);return;}}return this;};this.unsubscribeAll=function(){var k=j.length;while(k--){j[k].event.unsubscribe(j[k].handler);}j=[];return this;};}function b(k,j,l,m){if(l===undefined&&m===undefined){l=k;
m=j;}this.fromRow=Math.min(k,l);this.fromCell=Math.min(j,m);this.toRow=Math.max(k,l);this.toCell=Math.max(j,m);this.isSingleRow=function(){return this.fromRow==this.toRow;};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell;};this.contains=function(o,n){return o>=this.fromRow&&o<=this.toRow&&n>=this.fromCell&&n<=this.toCell;
};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")";}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")";}};}function e(){this.__nonDataRow=true;}function f(){this.__group=true;this.__updated=false;this.count=0;this.value=null;
this.title=null;this.collapsed=false;this.totals=null;}f.prototype=new e();f.prototype.equals=function(j){return this.value===j.value&&this.count===j.count&&this.collapsed===j.collapsed;};function d(){this.__groupTotals=true;this.group=null;}d.prototype=new e();function a(){var j=null;this.isActive=function(l){return(l?j===l:j!==null);
};this.activate=function(l){if(l===j){return;}if(j!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";}if(!l.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";}if(!l.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";
}j=l;};this.deactivate=function(l){if(j!==l){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";}j=null;};this.commitCurrentEdit=function(){return(j?j.commitCurrentEdit():true);};this.cancelCurrentEdit=function k(){return(j?j.cancelCurrentEdit():true);};}})(jQuery);
(function(d){d.extend(true,window,{Slick:{Data:{DataView:f,Aggregators:{Avg:c,Min:b,Max:a,Sum:e}}}});function f(aa){var at=this;var N={groupItemMetadataProvider:null,inlineFilters:false};var q="id";var au=[];var X=[];var aC={};var av=null;var w=null;var ar=null;var F=false;var j=true;var aM;var z;var ah={};
var P={};var aH;var n=[];var H;var A;var al=[];var M;var aw;var ae;var aB;var h=[];var m={};var K;var aG=false;var U;var D=0;var E=0;var g=0;var aE=new Slick.Event();var O=new Slick.Event();var aN=new Slick.Event();aa=d.extend(true,{},N,aa);function p(){F=true;}function s(){F=false;ax();}function az(aQ){ah=aQ;
}function Q(aQ){aH=aQ;}function aI(aS){aS=aS||0;var aT;for(var aR=aS,aQ=au.length;aR<aQ;aR++){aT=au[aR][q];if(aT===undefined){throw"Each data element must implement a unique 'id' property";}aC[aT]=aR;}}function G(){var aS;for(var aR=0,aQ=au.length;aR<aQ;aR++){aS=au[aR][q];if(aS===undefined||aC[aS]!==aR){throw"Each data element must implement a unique 'id' property";
}}}function aO(){return au;}function V(aR,aQ){if(aQ!==undefined){q=aQ;}au=n=aR;aC={};aI();G();ax();}function B(aQ){if(aQ.pageSize!=undefined){D=aQ.pageSize;E=D?Math.min(E,Math.max(0,Math.ceil(g/D)-1)):0;}if(aQ.pageNum!=undefined){E=Math.min(aQ.pageNum,Math.max(0,Math.ceil(g/D)-1));}aN.notify(am(),null,at);
ax();}function am(){var aQ=D?Math.max(1,Math.ceil(g/D)):1;return{pageSize:D,pageNum:E,totalRows:g,totalPages:aQ};}function I(aR,aQ){j=aQ;z=aR;aM=null;if(aQ===false){au.reverse();}au.sort(aR);if(aQ===false){au.reverse();}aC={};aI();ax();}function aJ(aS,aR){j=aR;aM=aS;z=null;var aQ=Object.prototype.toString;
Object.prototype.toString=(typeof aS=="function")?aS:function(){return this[aS];};if(aR===false){au.reverse();}au.sort();Object.prototype.toString=aQ;if(aR===false){au.reverse();}aC={};aI();ax();}function y(){if(z){I(z,j);}else{if(aM){aJ(aM,j);}}}function ac(aQ){w=aQ;if(aa.inlineFilters){H=ak();A=C();
}ax();}function ad(aQ,aR,aS){if(!aa.groupItemMetadataProvider){aa.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider();}M=aQ;aw=typeof M==="function";ae=aR;aB=aS;m={};h=[];ax();}function aL(aS,aR){K=aS;aG=(aR!==undefined)?aR:aG;U=[];var aQ=K.length;while(aQ--){U[aQ]=ao(K[aQ]);}ax();}function aA(aQ){return au[aQ];
}function J(aQ){return aC[aQ];}function v(){if(!av){av={};for(var aR=0,aQ=X.length;aR<aQ;aR++){av[X[aR][q]]=aR;}}}function ai(aQ){v();return av[aQ];}function Y(aQ){return au[aC[aQ]];}function aF(aR){var aS=[];v();for(var aQ=0;aQ<aR.length;aQ++){var aT=av[aR[aQ]];if(aT!=null){aS[aS.length]=aT;}}return aS;
}function T(aS){var aR=[];for(var aQ=0;aQ<aS.length;aQ++){if(aS[aQ]<X.length){aR[aR.length]=X[aS[aQ]][q];}}return aR;}function l(aR,aQ){if(aC[aR]===undefined||aR!==aQ[q]){throw"Invalid or non-matching id";}au[aC[aR]]=aQ;if(!ar){ar={};}ar[aR]=true;ax();}function aK(aQ,aR){au.splice(aQ,0,aR);aI(aQ);ax();
}function ap(aQ){au.push(aQ);aI(au.length-1);ax();}function aP(aR){var aQ=aC[aR];if(aQ===undefined){throw"Invalid id";}delete aC[aR];au.splice(aQ,1);aI(aQ);ax();}function ay(){return X.length;}function aD(aQ){return X[aQ];}function L(aQ){var aR=X[aQ];if(aR===undefined){return null;}if(aR.__group){return aa.groupItemMetadataProvider.getGroupRowMetadata(aR);
}if(aR.__groupTotals){return aa.groupItemMetadataProvider.getTotalsRowMetadata(aR);}return null;}function aj(aQ){m[aQ]=true;ax();}function af(aQ){delete m[aQ];ax();}function an(){return h;}function Z(aV){var aW;var aX;var aQ=[];var aU=[];var aT;for(var aS=0,aR=aV.length;aS<aR;aS++){aT=aV[aS];aX=(aw)?M(aT):aT[M];
aX=aX||0;aW=aU[aX];if(!aW){aW=new Slick.Group();aW.count=0;aW.value=aX;aW.rows=[];aQ[aQ.length]=aW;aU[aX]=aW;}aW.rows[aW.count++]=aT;}return aQ;}function aq(aT){if(aT.collapsed&&!aG){return;}var aS=new Slick.GroupTotals();var aR,aQ=K.length;while(aQ--){aR=K[aQ];aR.init();U[aQ].call(aR,aT.rows);aR.storeResult(aS);
}aS.group=aT;aT.totals=aS;}function ag(aR){var aQ=aR.length;while(aQ--){aq(aR[aQ]);}}function u(aR){var aQ=aR.length,aS;while(aQ--){aS=aR[aQ];aS.collapsed=(aS.value in m);aS.title=ae?ae(aS):aS.value;}}function i(aQ){var aU=[],aX=0,aW;for(var aT=0,aR=aQ.length;aT<aR;aT++){aW=aQ[aT];aU[aX++]=aW;if(!aW.collapsed){for(var aS=0,aV=aW.rows.length;
aS<aV;aS++){aU[aX++]=aW.rows[aS];}}if(aW.totals&&(!aW.collapsed||aG)){aU[aX++]=aW.totals;}}return aU;}function S(aR){var aQ=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;var aS=aR.toString().match(aQ);return{params:aS[1].split(","),body:aS[2]};}function ao(aS){var aR=S(aS.accumulate);var aQ=new Function("_items","for (var "+aR.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+aR.params[0]+" = _items[_i]; "+aR.body+"}");
aQ.displayName=aQ.name="compiledAccumulatorLoop";return aQ;}function ak(){var aT=S(w);var aQ=aT.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }");
var aR=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");aR=aR.replace(/\$filter\$/gi,aQ);aR=aR.replace(/\$item\$/gi,aT.params[0]);aR=aR.replace(/\$args\$/gi,aT.params[1]);
var aS=new Function("_items,_args",aR);aS.displayName=aS.name="compiledFilter";return aS;}function C(){var aT=S(w);var aQ=aT.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }");
var aR=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");aR=aR.replace(/\$filter\$/gi,aQ);
aR=aR.replace(/\$item\$/gi,aT.params[0]);aR=aR.replace(/\$args\$/gi,aT.params[1]);var aS=new Function("_items,_args,_cache",aR);aS.displayName=aS.name="compiledFilterWithCaching";return aS;}function o(aS,aT){var aR=[],aQ=0;for(var aU=0,aV=aS.length;aU<aV;aU++){if(w(aS[aU],aT)){aR[aQ++]=aS[aU];}}return aR;
}function R(aT,aU,aS){var aR=[],aQ=0,aX;for(var aV=0,aW=aT.length;aV<aW;aV++){aX=aT[aV];if(aS[aV]){aR[aQ++]=aX;}else{if(w(aX,aU)){aR[aQ++]=aX;aS[aV]=true;}}}return aR;}function x(aR){if(w){var aQ=aa.inlineFilters?H:o;var aT=aa.inlineFilters?A:R;if(ah.isFilterNarrowing){n=aQ(n,aH);}else{if(ah.isFilterExpanding){n=aT(aR,aH,al);
}else{if(!ah.isFilterUnchanged){n=aQ(aR,aH);}}}}else{n=D?aR:aR.concat();}var aS;if(D){if(n.length<E*D){E=Math.floor(n.length/D);}aS=n.slice(D*E,D*E+D);}else{aS=n;}return{totalRows:n.length,rows:aS};}function k(aZ,aT){var aY,aQ,aR,aX=[];var aV=0,aW=aT.length;if(ah&&ah.ignoreDiffsBefore){aV=Math.max(0,Math.min(aT.length,ah.ignoreDiffsBefore));
}if(ah&&ah.ignoreDiffsAfter){aW=Math.min(aT.length,Math.max(0,ah.ignoreDiffsAfter));}for(var aS=aV,aU=aZ.length;aS<aW;aS++){if(aS>=aU){aX[aX.length]=aS;}else{aY=aT[aS];aQ=aZ[aS];if((M&&(aR=(aY.__nonDataRow)||(aQ.__nonDataRow))&&aY.__group!==aQ.__group||aY.__updated||aY.__group&&!aY.equals(aQ))||(K&&aR&&(aY.__groupTotals||aQ.__groupTotals))||aY[q]!=aQ[q]||(ar&&ar[aY[q]])){aX[aX.length]=aS;
}}}return aX;}function t(aT){av=null;if(ah.isFilterNarrowing!=P.isFilterNarrowing||ah.isFilterExpanding!=P.isFilterExpanding){al=[];}var aR=x(aT);g=aR.totalRows;var aQ=aR.rows;h=[];if(M!=null){h=Z(aQ);if(h.length){u(h);if(K){ag(h);}h.sort(aB);aQ=i(h);}}var aS=k(X,aQ);X=aQ;return aS;}function ax(){if(F){return;
}var aQ=X.length;var aR=g;var aS=t(au,w);if(D&&g<E*D){E=Math.max(0,Math.ceil(g/D)-1);aS=t(au,w);}ar=null;P=ah;ah={};if(aR!=g){aN.notify(am(),null,at);}if(aQ!=X.length){aE.notify({previous:aQ,current:X.length},null,at);}if(aS.length>0){O.notify({rows:aS},null,at);}}function W(aT,aS){var aR=this;var aQ=aR.mapRowsToIds(aT.getSelectedRows());
var aU;aT.onSelectedRowsChanged.subscribe(function(aW,aV){if(aU){return;}aQ=aR.mapRowsToIds(aT.getSelectedRows());});this.onRowsChanged.subscribe(function(aX,aV){if(aQ.length>0){aU=true;var aW=aR.mapIdsToRows(aQ);if(!aS){aQ=aR.mapRowsToIds(aW);}aT.setSelectedRows(aW);aU=false;}});}function ab(aS,aR){var aQ;
var aU;aT(aS.getCellCssStyles(aR));function aT(aV){aQ={};for(var aW in aV){var aX=X[aW][q];aQ[aX]=aV[aW];}}aS.onCellCssStylesChanged.subscribe(function(aW,aV){if(aU){return;}if(aR!=aV.key){return;}if(aV.hash){aT(aV.hash);}});this.onRowsChanged.subscribe(function(aX,aV){if(aQ){aU=true;v();var aW={};for(var aZ in aQ){var aY=av[aZ];
if(aY!=undefined){aW[aY]=aQ[aZ];}}aS.setCellCssStyles(aR,aW);aU=false;}});}return{"beginUpdate":p,"endUpdate":s,"setPagingOptions":B,"getPagingInfo":am,"getItems":aO,"setItems":V,"setFilter":ac,"sort":I,"fastSort":aJ,"reSort":y,"groupBy":ad,"setAggregators":aL,"collapseGroup":aj,"expandGroup":af,"getGroups":an,"getIdxById":J,"getRowById":ai,"getItemById":Y,"getItemByIdx":aA,"mapRowsToIds":T,"mapIdsToRows":aF,"setRefreshHints":az,"setFilterArgs":Q,"refresh":ax,"updateItem":l,"insertItem":aK,"addItem":ap,"deleteItem":aP,"syncGridSelection":W,"syncGridCellCssStyles":ab,"getLength":ay,"getItem":aD,"getItemMetadata":L,"onRowCountChanged":aE,"onRowsChanged":O,"onPagingInfoChanged":aN};
}function c(g){this.field_=g;this.init=function(){this.count_=0;this.nonNullCount_=0;this.sum_=0;};this.accumulate=function(h){var i=h[this.field_];this.count_++;if(i!=null&&i!=""&&i!=NaN){this.nonNullCount_++;this.sum_+=parseFloat(i);}};this.storeResult=function(h){if(!h.avg){h.avg={};}if(this.nonNullCount_!=0){h.avg[this.field_]=this.sum_/this.nonNullCount_;
}};}function b(g){this.field_=g;this.init=function(){this.min_=null;};this.accumulate=function(h){var i=h[this.field_];if(i!=null&&i!=""&&i!=NaN){if(this.min_==null||i<this.min_){this.min_=i;}}};this.storeResult=function(h){if(!h.min){h.min={};}h.min[this.field_]=this.min_;};}function a(g){this.field_=g;
this.init=function(){this.max_=null;};this.accumulate=function(h){var i=h[this.field_];if(i!=null&&i!=""&&i!=NaN){if(this.max_==null||i>this.max_){this.max_=i;}}};this.storeResult=function(h){if(!h.max){h.max={};}h.max[this.field_]=this.max_;};}function e(g){this.field_=g;this.init=function(){this.sum_=null;
};this.accumulate=function(h){var i=h[this.field_];if(i!=null&&i!=""&&i!=NaN){this.sum_+=parseFloat(i);}};this.storeResult=function(h){if(!h.sum){h.sum={};}h.sum[this.field_]=this.sum_;};}})(jQuery);if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded";}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded";
}if(typeof Slick==="undefined"){throw"slick.core.js not loaded";}(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;var maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:false,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:50,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false,dataItemColumnValueExtractor:null,fullWidthRows:false,multiColumnSort:false,defaultFormatter:defaultFormatter,forceSyncScrolling:false};
var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null,defaultSortAsc:true};var th;var h;var ph;var n;var cj;var page=0;var offset=0;var vScrollDir=1;var initialized=false;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;
var $focusSink;var $headerScroller;var $headers;var $headerRow,$headerRowScroller,$headerRowSpacer;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var $boundAncestors;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;var canvasWidth;var viewportHasHScroll,viewportHasVScroll;
var headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0;var absoluteColumnMinWidth;var numberOfRows=0;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;
var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var lastRenderedScrollLeft=0;var prevScrollLeft=0;var scrollLeft=0;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumns=[];var columnPosLeft=[];var columnPosRight=[];var h_editorLoader=null;
var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");
}maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);validateAndEnforceOptions();columnDefaults.width=options.defaultColumnWidth;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);
columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth){m.width=m.minWidth;}if(m.maxWidth&&m.width>m.maxWidth){m.width=m.maxWidth;}}if(options.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");}editController={"commitCurrentEdit":commitCurrentEdit,"cancelCurrentEdit":cancelCurrentEdit};
$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative");}$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);
$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headers.width(getHeadersWidth());$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);
$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);
$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide();}if(!options.showHeaderRow){$headerRowScroller.hide();}$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container);
$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");$canvas=$("<div class='grid-canvas' />").appendTo($viewport);if(!options.explicitInitialization){finishInitialization();}}function finishInitialization(){if(!initialized){initialized=true;viewportW=parseFloat($.css($container[0],"width",true));
measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea");});}updateColumnCaches();createColumnHeaders();setupColumnSort();createCssRules();resizeCanvas();bindAncestorScrollEvents();
$container.bind("resize.slickgrid",resizeCanvas);$viewport.bind("scroll",handleScroll);$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave);
$headerRowScroller.bind("scroll",handleHeaderRowScroll);$focusSink.bind("keydown",handleKeyDown);$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave);
}}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self);}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy();}plugins.splice(i,1);break;}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);
if(selectionModel.destroy){selectionModel.destroy();}}selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);}}function getSelectionModel(){return selectionModel;}function getCanvasNode(){return $canvas[0];}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");
var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim;}function getHeadersWidth(){var headersWidth=0;for(var i=0,ii=columns.length;i<ii;i++){var width=columns[i].width;headersWidth+=width;}headersWidth+=scrollbarDimensions.width;return Math.max(headersWidth,viewportW)+1000;
}function getCanvasWidth(){var availableWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;var rowWidth=0;var i=columns.length;while(i--){rowWidth+=columns[i].width;}return options.fullWidthRows?Math.max(rowWidth,availableWidth):rowWidth;}function updateCanvasWidth(forceColumnWidthsUpdate){var oldCanvasWidth=canvasWidth;
canvasWidth=getCanvasWidth();if(canvasWidth!=oldCanvasWidth){$canvas.width(canvasWidth);$headerRow.width(canvasWidth);$headers.width(getHeadersWidth());viewportHasHScroll=(canvasWidth>viewportW-scrollbarDimensions.width);}$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0));
if(canvasWidth!=oldCanvasWidth||forceColumnWidthsUpdate){applyColumnWidths();}}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});}}function getMaxSupportedCssHeight(){var supportedHeight=1000000;
var testUpTo=($.browser.mozilla)?6000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(true){var test=supportedHeight*2;div.css("height",test);if(test>testUpTo||div.height()!==test){break;}else{supportedHeight=test;}}div.remove();return supportedHeight;}function bindAncestorScrollEvents(){var elem=$canvas[0];
while((elem=elem.parentNode)!=document.body&&elem!=null){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){var $elem=$(elem);if(!$boundAncestors){$boundAncestors=$elem;}else{$boundAncestors=$boundAncestors.add($elem);}$elem.bind("scroll."+uid,handleActiveCellPositionChange);
}}}function unbindAncestorScrollEvents(){if(!$boundAncestors){return;}$boundAncestors.unbind("scroll."+uid);$boundAncestors=null;}function updateColumnHeader(columnId,title,toolTip){if(!initialized){return;}var idx=getColumnIndex(columnId);if(idx==null){return;}var columnDef=columns[idx];var $header=$headers.children().eq(idx);
if($header){if(title!==undefined){columns[idx].name=title;}if(toolTip!==undefined){columns[idx].toolTip=toolTip;}trigger(self.onBeforeHeaderCellDestroy,{"node":$header[0],"column":columnDef});$header.attr("title",toolTip||"").children().eq(0).html(title);trigger(self.onHeaderCellRendered,{"node":$header[0],"column":columnDef});
}}function getHeaderRow(){return $headerRow[0];}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0];}function createColumnHeaders(){function hoverBegin(){$(this).addClass("ui-state-hover");}function hoverEnd(){$(this).removeClass("ui-state-hover");
}$headers.find(".slick-header-column").each(function(){var columnDef=$(this).data("column");if(columnDef){trigger(self.onBeforeHeaderCellDestroy,{"node":this,"column":columnDef});}});$headers.empty();$headers.width(getHeadersWidth());$headerRow.find(".slick-headerrow-column").each(function(){var columnDef=$(this).data("column");
if(columnDef){trigger(self.onBeforeHeaderRowCellDestroy,{"node":this,"column":columnDef});}});$headerRow.empty();for(var i=0;i<columns.length;i++){var m=columns[i];var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+m.name+"</span>").width(m.width-headerColumnWidthDiff).attr("title",m.toolTip||"").data("column",m).addClass(m.headerCssClass||"").appendTo($headers);
if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd);}if(m.sortable){header.append("<span class='slick-sort-indicator' />");}trigger(self.onHeaderCellRendered,{"node":header[0],"column":m});if(options.showHeaderRow){var headerRowCell=$("<div class='ui-state-default slick-headerrow-column l"+i+" r"+i+"'></div>").data("column",m).appendTo($headerRow);
trigger(self.onHeaderRowCellRendered,{"node":headerRowCell[0],"column":m});}}setSortColumns(sortColumns);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder();}}function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle")){return;
}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return;}var column=$col.data("column");if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return;}var sortOpts=null;var i=0;for(;i<sortColumns.length;i++){if(sortColumns[i].columnId==column.id){sortOpts=sortColumns[i];sortOpts.sortAsc=!sortOpts.sortAsc;
break;}}if(e.metaKey&&options.multiColumnSort){if(sortOpts){sortColumns.splice(i,1);}}else{if((!e.shiftKey&&!e.metaKey)||!options.multiColumnSort){sortColumns=[];}if(!sortOpts){sortOpts={columnId:column.id,sortAsc:column.defaultSortAsc};sortColumns.push(sortOpts);}else{if(sortColumns.length==0){sortColumns.push(sortOpts);
}}}setSortColumns(sortColumns);if(!options.multiColumnSort){trigger(self.onSort,{multiColumnSort:false,sortCol:column,sortAsc:sortOpts.sortAsc},e);}else{trigger(self.onSort,{multiColumnSort:true,sortCols:$.map(sortColumns,function(col){return{sortCol:columns[getColumnIndex(col.columnId)],sortAsc:col.sortAsc};
})},e);}}});}function setupColumnReorder(){$headers.sortable("destroy");$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active");
},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active");},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return;}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))]);
}setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize();}});}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();
columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i;}lastResizable=i;}});if(firstResizable===undefined){return;}columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return;}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false;
}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth();});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;
j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth;}else{stretchLeewayOnRight=null;}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;
j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth;}else{stretchLeewayOnLeft=null;}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000;
}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000;}if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000;}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000;}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);
}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;
}else{c.width=c.previousWidth+x;x=0;}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}}}else{x=d;for(j=i;j>=0;
j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);
if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;}else{c.width=c.previousWidth+x;x=0;}}}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths();}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");
for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows();}}updateCanvasWidth(true);render();trigger(self.onColumnsResized,{});});});}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];
var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0;});return delta;}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);
headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0;});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);
cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0;});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff);}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));
var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];
for(var i=0;i<columns.length;i++){rules.push("."+uid+" .l"+i+" { }");rules.push("."+uid+" .r"+i+" { }");}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ");}else{$style[0].appendChild(document.createTextNode(rules.join(" ")));}}function getColumnCssRules(idx){if(!stylesheet){var sheets=document.styleSheets;
for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break;}}if(!stylesheet){throw new Error("Cannot find stylesheet.");}columnCssRulesL=[];columnCssRulesR=[];var cssRules=(stylesheet.cssRules||stylesheet.rules);var matches,columnIdx;for(var i=0;
i<cssRules.length;i++){var selector=cssRules[i].selectorText;if(matches=/\.l\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesL[columnIdx]=cssRules[i];}else{if(matches=/\.r\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);
columnCssRulesR[columnIdx]=cssRules[i];}}}}return{"left":columnCssRulesL[idx],"right":columnCssRulesR[idx]};}function removeCssRules(){$style.remove();stylesheet=null;}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});var i=plugins.length;while(i--){unregisterPlugin(plugins[i]);
}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy");}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid);}function trigger(evt,args,e){e=e||new Slick.EventData();
args=args||{};args.grid=self;return evt.notify(args,e,self);}function getEditorLock(){return options.editorLock;}function getEditController(){return editController;}function getColumnIndex(id){return columnsById[id];}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,total=0,prevTotal,availWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;
for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);total+=c.width;if(c.resizable){shrinkLeeway+=c.width-Math.max(c.minWidth,absoluteColumnMinWidth);}}prevTotal=total;while(total>availWidth&&shrinkLeeway){var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;
i++){c=columns[i];var width=widths[i];if(!c.resizable||width<=c.minWidth||width<=absoluteColumnMinWidth){continue;}var absMinWidth=Math.max(c.minWidth,absoluteColumnMinWidth);var shrinkSize=Math.floor(shrinkProportion*(width-absMinWidth))||1;shrinkSize=Math.min(shrinkSize,width-absMinWidth);total-=shrinkSize;
shrinkLeeway-=shrinkSize;widths[i]-=shrinkSize;}if(prevTotal==total){break;}prevTotal=total;}prevTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue;}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;
total+=growSize;widths[i]+=growSize;}if(prevTotal==total){break;}prevTotal=total;}var reRender=false;for(i=0;i<columns.length;i++){if(columns[i].rerenderOnResize&&columns[i].width!=widths[i]){reRender=true;}columns[i].width=widths[i];}applyColumnHeaderWidths();updateCanvasWidth(true);if(reRender){invalidateAllRows();
render();}}function applyColumnHeaderWidths(){if(!initialized){return;}var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff);}}updateColumnCaches();}function applyColumnWidths(){var x=0,w,rule;
for(var i=0;i<columns.length;i++){w=columns[i].width;rule=getColumnCssRules(i);rule.left.style.left=x+"px";rule.right.style.right=(canvasWidth-x-w)+"px";x+=columns[i].width;}}function setSortColumn(columnId,ascending){setSortColumns([{columnId:columnId,sortAsc:ascending}]);}function setSortColumns(cols){sortColumns=cols;
var headerColumnEls=$headers.children();headerColumnEls.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");$.each(sortColumns,function(i,col){if(col.sortAsc==null){col.sortAsc=true;}var columnIndex=getColumnIndex(col.columnId);
if(columnIndex!=null){headerColumnEls.eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(col.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc");}});}function getSortColumns(){return sortColumns;}function handleSelectedRangesChanged(e,ranges){selectedRows=[];
var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j);hash[j]={};}for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass;}}}}setCellCssStyles(options.selectedCellCssClass,hash);
trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e);}function getColumns(){return columns;}function updateColumnCaches(){columnPosLeft=[];columnPosRight=[];var x=0;for(var i=0,ii=columns.length;i<ii;i++){columnPosLeft[i]=x;columnPosRight[i]=x+columns[i].width;x+=columns[i].width;}}function setColumns(columnDefinitions){columns=columnDefinitions;
columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth){m.width=m.minWidth;}if(m.maxWidth&&m.width>m.maxWidth){m.width=m.maxWidth;}}updateColumnCaches();if(initialized){invalidateAllRows();createColumnHeaders();
removeCssRules();createCssRules();resizeCanvas();applyColumnWidths();handleScroll();}}function getOptions(){return options;}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return;}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength());}options=$.extend(options,args);
validateAndEnforceOptions();$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");render();}function validateAndEnforceOptions(){if(options.autoHeight){options.leaveSpaceForNewRows=false;}}function setData(newData,scrollToTop){data=newData;invalidateAllRows();updateRowCount();if(scrollToTop){scrollTo(0);
}}function getData(){return data;}function getDataLength(){if(data.getLength){return data.getLength();}else{return data.length;}}function getDataItem(i){if(data.getItem){return data.getItem(i);}else{return data[i];}}function getTopPanel(){return $topPanel[0];}function setTopPanelVisibility(visible){if(options.showTopPanel!=visible){options.showTopPanel=visible;
if(visible){$topPanelScroller.slideDown("fast",resizeCanvas);}else{$topPanelScroller.slideUp("fast",resizeCanvas);}}}function setHeaderRowVisibility(visible){if(options.showHeaderRow!=visible){options.showHeaderRow=visible;if(visible){$headerRowScroller.slideDown("fast",resizeCanvas);}else{$headerRowScroller.slideUp("fast",resizeCanvas);
}}}function scrollTo(y){y=Math.max(y,0);y=Math.min(y,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range);
updateRowPositions();}if(prevScrollTop!=newScrollTop){vScrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{});}}function defaultFormatter(row,cell,value,columnDef,dataContext){if(value==null){return"";
}else{return value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);
return(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||options.defaultFormatter;}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);
var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor;}if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor;
}return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column));}function getDataItemValueForColumn(item,columnDef){if(options.dataItemColumnValueExtractor){return options.dataItemColumnValueExtractor(item,columnDef);}return item[columnDef.field];}function appendRowHtml(stringArray,row,range){var d=getDataItem(row);
var dataLoading=row<getDataLength()&&!d;var rowCss="slick-row"+(dataLoading?" loading":"")+(row===activeRow?" active":"")+(row%2==1?" odd":" even");var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses;}stringArray.push("<div class='ui-widget-content "+rowCss+"' style='top:"+(options.rowHeight*row-offset)+"px'>");
var colspan,m;for(var i=0,ii=columns.length;i<ii;i++){m=columns[i];colspan=1;if(metadata&&metadata.columns){var columnData=metadata.columns[m.id]||metadata.columns[i];colspan=(columnData&&columnData.colspan)||1;if(colspan==="*"){colspan=ii-i;}}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){if(columnPosLeft[i]>range.rightPx){break;
}appendCellHtml(stringArray,row,i,colspan);}if(colspan>1){i+=(colspan-1);}}stringArray.push("</div>");}function appendCellHtml(stringArray,row,cell,colspan){var m=columns[cell];var d=getDataItem(row);var cellCss="slick-cell l"+cell+" r"+Math.min(columns.length-1,cell+colspan-1)+(m.cssClass?" "+m.cssClass:"");
if(row===activeRow&&cell===activeCell){cellCss+=(" active");}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id]);}}stringArray.push("<div class='"+cellCss+"'>");if(d){var value=getDataItemValueForColumn(d,m);stringArray.push(getFormatter(row,m)(row,cell,value,m,d));
}stringArray.push("</div>");rowsCache[row].cellRenderQueue.push(cell);rowsCache[row].cellColSpans[cell]=colspan;}function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i);}}}function invalidate(){updateRowCount();
invalidateAllRows();render();}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal();}for(var row in rowsCache){removeRowFromCache(row);}}function removeRowFromCache(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return;}$canvas[0].removeChild(cacheEntry.rowNode);delete rowsCache[row];
delete postProcessedRows[row];renderedRows--;counter_rows_removed++;}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return;}vScrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===rows[i]){makeActiveCellNormal();}if(rowsCache[rows[i]]){removeRowFromCache(rows[i]);}}}function invalidateRow(row){invalidateRows([row]);
}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return;}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d);}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,getDataItemValueForColumn(d,m),m,d):"";
invalidatePostProcessingResults(row);}}function updateRow(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return;}ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){continue;}columnIdx=columnIdx|0;var m=columns[columnIdx],d=getDataItem(row),node=cacheEntry.cellNodesByColumnIdx[columnIdx];
if(row===activeRow&&columnIdx===activeCell&&currentEditor){currentEditor.loadValue(d);}else{if(d){node.innerHTML=getFormatter(row,m)(row,columnIdx,getDataItemValueForColumn(d,m),m,d);}else{node.innerHTML="";}}}invalidatePostProcessingResults(row);}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-parseFloat($.css($container[0],"paddingTop",true))-parseFloat($.css($container[0],"paddingBottom",true))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0);
}function resizeCanvas(){if(!initialized){return;}if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0));}else{viewportH=getViewportHeight();}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight){$viewport.height(viewportH);
}if(options.forceFitColumns){autosizeColumns();}updateRowCount();handleScroll();render();}function updateRowCount(){if(!initialized){return;}numberOfRows=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldViewportHasVScroll=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&(numberOfRows*options.rowHeight>viewportH);
var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i);}}if(activeCellNode&&activeRow>l){resetActiveCell();}var oldH=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;
cj=0;}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1);}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop;}var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0;}else{if(oldScrollTopInRange){scrollTo(scrollTop+offset);
}else{scrollTo(th-viewportH);}}if(h!=oldH&&options.autoHeight){resizeCanvas();}if(options.forceFitColumns&&oldViewportHasVScroll!=viewportHasVScroll){autosizeColumns();}updateCanvasWidth(false);}function getVisibleRange(viewportTop,viewportLeft){if(viewportTop==null){viewportTop=scrollTop;}if(viewportLeft==null){viewportLeft=scrollLeft;
}return{top:Math.floor((viewportTop+offset)/options.rowHeight),bottom:Math.ceil((viewportTop+offset+viewportH)/options.rowHeight),leftPx:viewportLeft,rightPx:viewportLeft+viewportW};}function getRenderedRange(viewportTop,viewportLeft){var range=getVisibleRange(viewportTop,viewportLeft);var buffer=Math.round(viewportH/options.rowHeight);
var minBuffer=3;if(vScrollDir==-1){range.top-=buffer;range.bottom+=minBuffer;}else{if(vScrollDir==1){range.top-=minBuffer;range.bottom+=buffer;}else{range.top-=minBuffer;range.bottom+=minBuffer;}}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);
range.leftPx-=viewportW;range.rightPx+=viewportW;range.leftPx=Math.max(0,range.leftPx);range.rightPx=Math.min(canvasWidth,range.rightPx);return range;}function ensureCellNodesInRowsCache(row){var cacheEntry=rowsCache[row];if(cacheEntry){if(cacheEntry.cellRenderQueue.length){var lastChild=cacheEntry.rowNode.lastChild;
while(cacheEntry.cellRenderQueue.length){var columnIdx=cacheEntry.cellRenderQueue.pop();cacheEntry.cellNodesByColumnIdx[columnIdx]=lastChild;lastChild=lastChild.previousSibling;}}}}function cleanUpCells(range,row){var totalCellsRemoved=0;var cacheEntry=rowsCache[row];var cellsToRemove=[];for(var i in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)){continue;
}i=i|0;var colspan=cacheEntry.cellColSpans[i];if(columnPosLeft[i]>range.rightPx||columnPosRight[Math.min(columns.length-1,i+colspan-1)]<range.leftPx){if(!(row==activeRow&&i==activeCell)){cellsToRemove.push(i);}}}var cellToRemove;while((cellToRemove=cellsToRemove.pop())!=null){cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);
delete cacheEntry.cellColSpans[cellToRemove];delete cacheEntry.cellNodesByColumnIdx[cellToRemove];if(postProcessedRows[row]){delete postProcessedRows[row][cellToRemove];}totalCellsRemoved++;}}function cleanUpAndRenderCells(range){var cacheEntry;var stringArray=[];var processedRows=[];var cellsAdded;var totalCellsAdded=0;
var colspan;for(var row=range.top;row<=range.bottom;row++){cacheEntry=rowsCache[row];if(!cacheEntry){continue;}ensureCellNodesInRowsCache(row);cleanUpCells(range,row);cellsAdded=0;var metadata=data.getItemMetadata&&data.getItemMetadata(row);metadata=metadata&&metadata.columns;for(var i=0,ii=columns.length;
i<ii;i++){if(columnPosLeft[i]>range.rightPx){break;}if((colspan=cacheEntry.cellColSpans[i])!=null){i+=(colspan>1?colspan-1:0);continue;}colspan=1;if(metadata){var columnData=metadata[columns[i].id]||metadata[i];colspan=(columnData&&columnData.colspan)||1;if(colspan==="*"){colspan=ii-i;}}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){appendCellHtml(stringArray,row,i,colspan);
cellsAdded++;}i+=(colspan>1?colspan-1:0);}if(cellsAdded){totalCellsAdded+=cellsAdded;processedRows.push(row);}}if(!stringArray.length){return;}var x=document.createElement("div");x.innerHTML=stringArray.join("");var processedRow;var node;while((processedRow=processedRows.pop())!=null){cacheEntry=rowsCache[processedRow];
var columnIdx;while((columnIdx=cacheEntry.cellRenderQueue.pop())!=null){node=x.lastChild;cacheEntry.rowNode.appendChild(node);cacheEntry.cellNodesByColumnIdx[columnIdx]=node;}}}function renderRows(range){var parentNode=$canvas[0],stringArray=[],rows=[],needToReselectCell=false;for(var i=range.top;i<=range.bottom;
i++){if(rowsCache[i]){continue;}renderedRows++;rows.push(i);rowsCache[i]={"rowNode":null,"cellColSpans":[],"cellNodesByColumnIdx":[],"cellRenderQueue":[]};appendRowHtml(stringArray,i,range);if(activeCellNode&&activeRow===i){needToReselectCell=true;}counter_rows_rendered++;}if(!rows.length){return;}var x=document.createElement("div");
x.innerHTML=stringArray.join("");for(var i=0,ii=rows.length;i<ii;i++){rowsCache[rows[i]].rowNode=parentNode.appendChild(x.firstChild);}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell);}}function startPostProcessing(){if(!options.enableAsyncPostRender){return;}clearTimeout(h_postrender);
h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing();}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].rowNode.style.top=(row*options.rowHeight-offset)+"px";
}}function render(){if(!initialized){return;}var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);if(lastRenderedScrollLeft!=scrollLeft){cleanUpAndRenderCells(rendered);}renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);
startPostProcessing();lastRenderedScrollTop=scrollTop;lastRenderedScrollLeft=scrollLeft;h_render=null;}function handleHeaderRowScroll(){var scrollLeft=$headerRowScroller[0].scrollLeft;if(scrollLeft!=$viewport[0].scrollLeft){$viewport[0].scrollLeft=scrollLeft;}}function handleScroll(){scrollTop=$viewport[0].scrollTop;
scrollLeft=$viewport[0].scrollLeft;var vScrollDist=Math.abs(scrollTop-prevScrollTop);var hScrollDist=Math.abs(scrollLeft-prevScrollLeft);if(hScrollDist){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft;
}if(vScrollDist){vScrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(vScrollDist<viewportH){scrollTo(scrollTop+offset);}else{var oldOffset=offset;if(h==viewportH){page=0;}else{page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));}offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows();
}}}if(hScrollDist||vScrollDist){if(h_render){clearTimeout(h_render);}if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20){if(options.forceSyncScrolling||(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW)){render();
}else{h_render=setTimeout(render,50);}trigger(self.onViewportChanged,{});}}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop});}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(vScrollDir>=0)?postProcessFromRow++:postProcessToRow--;var cacheEntry=rowsCache[row];
if(!cacheEntry||row>=getDataLength()){continue;}if(!postProcessedRows[row]){postProcessedRows[row]={};}ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){continue;}columnIdx=columnIdx|0;var m=columns[columnIdx];
if(m.asyncPostRender&&!postProcessedRows[row][columnIdx]){var node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(node){m.asyncPostRender(node,postProcessFromRow,getDataItem(row),m);}postProcessedRows[row][columnIdx]=true;}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return;
}}function updateCellCssStylesOnRenderedRows(addedHash,removedHash){var node,columnId,addedRowHash,removedRowHash;for(var row in rowsCache){removedRowHash=removedHash&&removedHash[row];addedRowHash=addedHash&&addedHash[row];if(removedRowHash){for(columnId in removedRowHash){if(!addedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));
if(node){$(node).removeClass(removedRowHash[columnId]);}}}}if(addedRowHash){for(columnId in addedRowHash){if(!removedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(addedRowHash[columnId]);}}}}}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists.";
}cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,null);trigger(self.onCellCssStylesChanged,{"key":key,"hash":hash});}function removeCellCssStyles(key){if(!cellCssClasses[key]){return;}updateCellCssStylesOnRenderedRows(null,cellCssClasses[key]);delete cellCssClasses[key];trigger(self.onCellCssStylesChanged,{"key":key,"hash":null});
}function setCellCssStyles(key,hash){var prevHash=cellCssClasses[key];cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,prevHash);trigger(self.onCellCssStylesChanged,{"key":key,"hash":hash});}function getCellCssStyles(key){return cellCssClasses[key];}function flashCell(row,cell,speed){speed=speed||100;
if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return;}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1);});},speed);}toggleCellClass(4);}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);
if(!cell||!cellExists(cell.row,cell.cell)){return false;}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval;}return false;}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false;}var retval=trigger(self.onDragStart,dd,e);
if(e.isImmediatePropagationStopped()){return retval;}return false;}function handleDrag(e,dd){return trigger(self.onDrag,dd,e);}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e);}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var handled=e.isImmediatePropagationStopped();
if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return;}cancelEditAndSetFocus();}else{if(e.which==37){navigateLeft();}else{if(e.which==39){navigateRight();}else{if(e.which==38){navigateUp();}else{if(e.which==40){navigateDown();}else{if(e.which==9){navigateNext();
}else{if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown();}else{commitEditAndSetFocus();}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable();}}}}else{return;}}}}}}}}else{if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev();
}else{return;}}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0;}catch(error){}}function handleClick(e){if(!currentEditor){if(e.target!=document.activeElement){setFocus();}}var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;
}trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}if((activeCell!=cell.cell||activeRow!=cell.row)&&canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit);
}}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return;}if(activeCellNode===$cell[0]&&currentEditor!==null){return;}trigger(self.onContextMenu,{},e);}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;
}trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}if(options.editable){gotoCell(cell.row,cell.cell,true);}}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{"column":$(this).data("column")},e);}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{"column":$(this).data("column")},e);
}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&$header.data("column");trigger(self.onHeaderContextMenu,{column:column},e);}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");
var column=$header&&$header.data("column");if(column){trigger(self.onHeaderClick,{column:column},e);}}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e);}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e);}function cellExists(row,cell){return !(row<0||row>=getDataLength()||cell<0||cell>=columns.length);
}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++;}if(cell<0){cell=0;}return{row:row,cell:cell-1};}function getCellFromNode(cellNode){var cls=/l\d+/.exec(cellNode.className);if(!cls){throw"getCellFromNode: cannot get cell - "+cellNode.className;
}return parseInt(cls[0].substr(1,cls[0].length-1),10);}function getRowFromNode(rowNode){for(var row in rowsCache){if(rowsCache[row].rowNode===rowNode){return row|0;}}return null;}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length){return null;}var row=getRowFromNode($cell[0].parentNode);
var cell=getCellFromNode($cell[0]);if(row==null||cell==null){return null;}else{return{"row":row,"cell":cell};}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null;}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width;
}var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2};}function resetActiveCell(){setActiveCellInternal(null,false);}function setFocus(){$focusSink[0].focus();}function scrollCellIntoView(row,cell){var colspan=getColspan(row,cell);var left=columnPosLeft[cell],right=columnPosRight[cell+(colspan>1?colspan-1:0)],scrollRight=scrollLeft+viewportW;
if(left<scrollLeft){$viewport.scrollLeft(left);handleScroll();render();}else{if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth));handleScroll();render();}}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active");
if(rowsCache[activeRow]){$(rowsCache[activeRow].rowNode).removeClass("active");}}var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=getRowFromNode(activeCellNode.parentNode);activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");
$(rowsCache[activeRow].rowNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable();},options.asyncEditorLoadDelay);}else{makeActiveCellEditable();
}}}else{activeRow=activeCell=null;}if(activeCellChanged){trigger(self.onActiveCellChanged,getActiveCell());}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty();}else{if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges();
}}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false;}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false;}if(!getEditor(row,cell)){return false;}return true;}function makeActiveCellNormal(){if(!currentEditor){return;}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});
currentEditor.destroy();currentEditor=null;if(activeCellNode){var d=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(d){var column=columns[activeCell];var formatter=getFormatter(activeRow,column);activeCellNode.innerHTML=formatter(activeRow,activeCell,getDataItemValueForColumn(d,column),column,getDataItem(activeRow));
invalidatePostProcessingResults(activeRow);}}if($.browser.msie){clearTextSelection();}getEditorLock().deactivate(editController);}function makeActiveCellEditable(editor){if(!activeCellNode){return;}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";
}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return;}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return;}getEditorLock().activate(editController);
$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML="";}currentEditor=new (editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});
if(item){currentEditor.loadValue(item);}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange();}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown();}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus();
}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight;
}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth;}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent;
}box.bottom=box.top+box.height;box.right=box.left+box.width;}return box;}function getActiveCellPosition(){return absBox(activeCellNode);}function getGridPosition(){return absBox($container[0]);}function handleActiveCellPositionChange(){if(!activeCellNode){return;}trigger(self.onActiveCellPositionChanged,{});
if(currentEditor){var cellBox=getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide();}else{currentEditor.show();}}if(currentEditor.position){currentEditor.position(cellBox);}}}function getCellEditor(){return currentEditor;}function getActiveCell(){if(!activeCellNode){return null;
}else{return{row:activeRow,cell:activeCell};}}function getActiveCellNode(){return activeCellNode;}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);
render();}else{if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render();}}}function scrollRowToTop(row){scrollTo(row*options.rowHeight);render();}function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1;
}var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell;}else{colspan=colspan||1;}return colspan;}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell;
}cell+=getColspan(row,cell);}return null;}function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell;}cell+=getColspan(row,cell);}return lastFocusableCell;}function gotoRight(row,cell,posX){if(cell>=columns.length){return null;
}do{cell+=getColspan(row,cell);}while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{"row":row,"cell":cell,"posX":cell};}return null;}function gotoLeft(row,cell,posX){if(cell<=0){return null;}var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null;
}var prev={"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null;}if(pos.cell>=cell){return prev;}prev=pos;}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null;
}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);}if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null;}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);
}if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos;}var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);
if(firstFocusableCell!==null){return{"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};}}return null;}function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break;}if(--row<0){return null;}cell=0;lastSelectableCell=findLastFocusableCell(row);
if(lastSelectableCell!==null){pos={"row":row,"cell":lastSelectableCell,"posX":lastSelectableCell};}}return pos;}function navigateRight(){navigate("right");}function navigateLeft(){navigate("left");}function navigateDown(){navigate("down");}function navigateUp(){navigate("up");}function navigateNext(){navigate("next");
}function navigatePrev(){navigate("prev");}function navigate(dir){if(!activeCellNode||!options.enableCellNavigation){return;}if(!getEditorLock().commitCurrentEdit()){return;}setFocus();var stepFunctions={"up":gotoUp,"down":gotoDown,"left":gotoLeft,"right":gotoRight,"prev":gotoPrev,"next":gotoNext};var stepFn=stepFunctions[dir];
var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollRowIntoView(pos.row,!isAddNewRow);scrollCellIntoView(pos.row,pos.cell);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX;}else{setActiveCellInternal(getCellNode(activeRow,activeCell),(activeRow==getDataLength())||options.autoEdit);
}}function getCellNode(row,cell){if(rowsCache[row]){ensureCellNodesInRowsCache(row);return rowsCache[row].cellNodesByColumnIdx[cell];}return null;}function setActiveCell(row,cell){if(!initialized){return;}if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return;}if(!options.enableCellNavigation){return;
}scrollRowIntoView(row,false);scrollCellIntoView(row,cell);setActiveCellInternal(getCellNode(row,cell),false);}function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false;}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);
if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable;}var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable;
}if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable;}if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable;}return true;}function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false;
}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable;}var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable;
}if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable;}return true;}function gotoCell(row,cell,forceEdit){if(!initialized){return;}if(!canCellBeActive(row,cell)){return;}if(!getEditorLock().commitCurrentEdit()){return;}scrollRowIntoView(row,false);scrollCellIntoView(row,cell);
var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus();}}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();
if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row);
},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row);}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand);}else{editCommand.execute();makeActiveCellNormal();}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item});
}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column});}return !getEditorLock().isActive();}else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);
trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false;}}makeActiveCellNormal();}return true;}function cancelCurrentEdit(){makeActiveCellNormal();return true;}function rowsToRanges(rows){var ranges=[];
var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));}return ranges;}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set";}return selectedRows;}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set";
}selectionModel.setSelectedRanges(rowsToRanges(rows));}this.debug=function(){var s="";s+=("\n"+"counter_rows_rendered:  "+counter_rows_rendered);s+=("\n"+"counter_rows_removed:  "+counter_rows_removed);s+=("\n"+"renderedRows:  "+renderedRows);s+=("\n"+"numVisibleRows:  "+numVisibleRows);s+=("\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight);
s+=("\n"+"n(umber of pages):  "+n);s+=("\n"+"(current) page:  "+page);s+=("\n"+"page height (ph):  "+ph);s+=("\n"+"vScrollDir:  "+vScrollDir);alert(s);};this.eval=function(expr){return eval(expr);};$.extend(this,{"slickGridVersion":"2.1","onScroll":new Slick.Event(),"onSort":new Slick.Event(),"onHeaderMouseEnter":new Slick.Event(),"onHeaderMouseLeave":new Slick.Event(),"onHeaderContextMenu":new Slick.Event(),"onHeaderClick":new Slick.Event(),"onHeaderCellRendered":new Slick.Event(),"onBeforeHeaderCellDestroy":new Slick.Event(),"onHeaderRowCellRendered":new Slick.Event(),"onBeforeHeaderRowCellDestroy":new Slick.Event(),"onMouseEnter":new Slick.Event(),"onMouseLeave":new Slick.Event(),"onClick":new Slick.Event(),"onDblClick":new Slick.Event(),"onContextMenu":new Slick.Event(),"onKeyDown":new Slick.Event(),"onAddNewRow":new Slick.Event(),"onValidationError":new Slick.Event(),"onViewportChanged":new Slick.Event(),"onColumnsReordered":new Slick.Event(),"onColumnsResized":new Slick.Event(),"onCellChange":new Slick.Event(),"onBeforeEditCell":new Slick.Event(),"onBeforeCellEditorDestroy":new Slick.Event(),"onBeforeDestroy":new Slick.Event(),"onActiveCellChanged":new Slick.Event(),"onActiveCellPositionChanged":new Slick.Event(),"onDragInit":new Slick.Event(),"onDragStart":new Slick.Event(),"onDrag":new Slick.Event(),"onDragEnd":new Slick.Event(),"onSelectedRowsChanged":new Slick.Event(),"onCellCssStylesChanged":new Slick.Event(),"registerPlugin":registerPlugin,"unregisterPlugin":unregisterPlugin,"getColumns":getColumns,"setColumns":setColumns,"getColumnIndex":getColumnIndex,"updateColumnHeader":updateColumnHeader,"setSortColumn":setSortColumn,"setSortColumns":setSortColumns,"getSortColumns":getSortColumns,"autosizeColumns":autosizeColumns,"getOptions":getOptions,"setOptions":setOptions,"getData":getData,"getDataLength":getDataLength,"getDataItem":getDataItem,"setData":setData,"getSelectionModel":getSelectionModel,"setSelectionModel":setSelectionModel,"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"render":render,"invalidate":invalidate,"invalidateRow":invalidateRow,"invalidateRows":invalidateRows,"invalidateAllRows":invalidateAllRows,"updateCell":updateCell,"updateRow":updateRow,"getViewport":getVisibleRange,"getRenderedRange":getRenderedRange,"resizeCanvas":resizeCanvas,"updateRowCount":updateRowCount,"scrollRowIntoView":scrollRowIntoView,"scrollRowToTop":scrollRowToTop,"scrollCellIntoView":scrollCellIntoView,"getCanvasNode":getCanvasNode,"focus":setFocus,"getCellFromPoint":getCellFromPoint,"getCellFromEvent":getCellFromEvent,"getActiveCell":getActiveCell,"setActiveCell":setActiveCell,"getActiveCellNode":getActiveCellNode,"getActiveCellPosition":getActiveCellPosition,"resetActiveCell":resetActiveCell,"editActiveCell":makeActiveCellEditable,"getCellEditor":getCellEditor,"getCellNode":getCellNode,"getCellNodeBox":getCellNodeBox,"canCellBeSelected":canCellBeSelected,"canCellBeActive":canCellBeActive,"navigatePrev":navigatePrev,"navigateNext":navigateNext,"navigateUp":navigateUp,"navigateDown":navigateDown,"navigateLeft":navigateLeft,"navigateRight":navigateRight,"gotoCell":gotoCell,"getTopPanel":getTopPanel,"setTopPanelVisibility":setTopPanelVisibility,"setHeaderRowVisibility":setHeaderRowVisibility,"getHeaderRow":getHeaderRow,"getHeaderRowColumn":getHeaderRowColumn,"getGridPosition":getGridPosition,"flashCell":flashCell,"addCellCssStyles":addCellCssStyles,"setCellCssStyles":setCellCssStyles,"removeCellCssStyles":removeCellCssStyles,"getCellCssStyles":getCellCssStyles,"init":finishInitialization,"destroy":destroy,"getEditorLock":getEditorLock,"getEditController":getEditController});
init();}}(jQuery));(function(b){b.extend(true,window,{"Slick":{"RowSelectionModel":a}});function a(f){var s;var o=[];var i=this;var n=new Slick.EventHandler();var m;var q;var t={selectActiveRow:true};function u(y){q=b.extend(true,{},t,f);s=y;n.subscribe(s.onActiveCellChanged,e(w));n.subscribe(s.onKeyDown,e(l));
n.subscribe(s.onClick,e(k));}function x(){n.unsubscribeAll();}function e(y){return function(){if(!m){m=true;y.apply(this,arguments);m=false;}};}function g(y){var B=[];for(var A=0;A<y.length;A++){for(var z=y[A].fromRow;z<=y[A].toRow;z++){B.push(z);}}return B;}function h(B){var z=[];var y=s.getColumns().length-1;
for(var A=0;A<B.length;A++){z.push(new Slick.Range(B[A],0,B[A],y));}return z;}function v(B,A){var y,z=[];for(y=B;y<=A;y++){z.push(y);}for(y=A;y<B;y++){z.push(y);}return z;}function d(){return g(o);}function j(y){c(h(y));}function c(y){o=y;i.onSelectedRangesChanged.notify(o);}function p(){return o;}function w(z,y){if(q.selectActiveRow&&y.row!=null){c([new Slick.Range(y.row,0,y.row,s.getColumns().length-1)]);
}}function l(D){var z=s.getActiveCell();if(z&&D.shiftKey&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&(D.which==38||D.which==40)){var C=d();C.sort(function(E,F){return E-F;});if(!C.length){C=[z.row];}var B=C[0];var y=C[C.length-1];var A;if(D.which==40){A=z.row<y||B==y?++y:++B;}else{A=z.row<y?--y:--B;}if(A>=0&&A<s.getDataLength()){s.scrollRowIntoView(A);
o=h(v(B,y));c(o);}D.preventDefault();D.stopPropagation();}}function k(D){var z=s.getCellFromEvent(D);if(!z||!s.canCellBeActive(z.row,z.cell)){return false;}var B=g(o);var y=b.inArray(z.row,B);if(!D.ctrlKey&&!D.shiftKey&&!D.metaKey){return false;}else{if(s.getOptions().multiSelect){if(y===-1&&(D.ctrlKey||D.metaKey)){B.push(z.row);
s.setActiveCell(z.row,z.cell);}else{if(y!==-1&&(D.ctrlKey||D.metaKey)){B=b.grep(B,function(H,G){return(H!==z.row);});s.setActiveCell(z.row,z.cell);}else{if(B.length&&D.shiftKey){var C=B.pop();var F=Math.min(z.row,C);var E=Math.max(z.row,C);B=[];for(var A=F;A<=E;A++){if(A!==C){B.push(A);}}B.push(C);s.setActiveCell(z.row,z.cell);
}}}}}o=h(B);c(o);D.stopImmediatePropagation();return true;}b.extend(this,{"getSelectedRows":d,"setSelectedRows":j,"getSelectedRanges":p,"setSelectedRanges":c,"init":u,"destroy":x,"onSelectedRangesChanged":new Slick.Event()});}})(jQuery);