(function(a,b){a.widget("uiplugins.combobox",{options:{"autocompleteOn":true,"buttonClass":"","buttonStyle":{},"height":20,"ignoreCase":true,"inputClass":"","inputStyle":{},"maxHeight":200,"searchType":"startsWith","width":200},_create:function(){var c=this;var d=this.$select=this.element.addClass("ui-combobox-select").hide(),e=d.children(":selected"),f=e.val()?e.text():"";
var g=this.$input=a("<input />").keydown(function(h){var i=a(this);if(h.which==a.ui.keyCode.DOWN&&!i.autocomplete("widget").is(":visible")){i.autocomplete("search","");return false;}}).height(this.options.height).insertAfter(d).val(f).wrap(a("<div></div>").addClass("ui-combobox")).autocomplete(this._initAutocomplete()).addClass("ui-widget ui-widget-content ui-corner-left ui-combobox-input"+(this.options.inputClass?" "+this.options.inputClass:"")).css(this.options.inputStyle);
g.data("autocomplete")._renderItem=function(h,i){h.addClass("ui-combobox-list");h.css("max-height",c.options.maxHeight);return a("<li></li>").data("item.autocomplete",i).append("<a>"+i.label+"</a>").appendTo(h);};this.$button=this._initButton();g.width(this.options.width-this.$button.width());if(!this.options.autocompleteOn){g.attr("disabled","disabled");
}},_initAutocomplete:function(){var c=this;return{delay:0,minLength:0,source:function(f,e){var h=c.options.searchType=="startsWith"?"^":"";var d=c.options.ignoreCase&&c.options.ignoreCase!=="false"?"i":"";var g=new RegExp(h+a.ui.autocomplete.escapeRegex(f.term),d);e(c.$select.children("option").map(function(){var i=a(this).text();
if(this.value&&(!f.term||g.test(i))){return{label:i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(f.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:i,option:this};}}));},select:function(d,e){e.item.option.selected=true;c._trigger("select",d,{"item":e.item.option});
},change:function(d,e){c._onChange(d,e);},open:function(d,e){c._trigger("open");},close:function(){c._trigger("close");}};},_initButton:function(){var c=this.$input;return a("<button>&nbsp;</button>").attr("tabIndex",-1).attr("title","Show All Items").insertAfter(c).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button"+(this.options.buttonClass?" "+this.options.buttonClass:"")).css(this.options.buttonStyle).height(this._getButtonHeight()).mousedown(function(){if(c.autocomplete("widget").is(":visible")){c.autocomplete("close");
return;}c.autocomplete("search","").select();return false;});},_onChange:function(f,g){if(!g.item){var c=this;var h=new RegExp("^"+a.ui.autocomplete.escapeRegex(this.$input.val())+"$","i");var e=false;var d=this.$select;d.children("option").each(function(){if(this.text.match(h)){this.selected=e=true;
d.val(this.value);c._trigger("change",f,{"item":this});return false;}});if(!e){this.$input.val(d.children("option:selected").text());return false;}}},_getButtonHeight:function(){return this.$input.height()+Number(this.$input.css("border-top-width").replace("px",""))+Number(this.$input.css("border-bottom-width").replace("px",""));
},_setOption:function(c,d){switch(c){case"width":this.$input.width(d-this.$button.width());break;case"height":this.$input.height(d);this.$button.height(this._getButtonHeight());break;case"maxHeight":this.$input.autocomplete("widget").css("max-height",d+"px");break;case"buttonClass":this.$button.removeClass(this.options.buttonClass).addClass(d);
break;case"buttonStyle":if(typeof d==="string"){d=a.parseJSON(d);}this.$button.css(d);break;case"inputClass":this.$input.removeClass(this.options.inputClass).addClass(d);break;case"inputStyle":if(typeof d==="string"){d=a.parseJSON(d);}this.$input.css(d);break;case"autocompleteOn":if(d&&d!=="false"){this.$input.removeAttr("disabled","disabled");
}else{this.$input.attr("disabled","disabled");}break;}a.Widget.prototype._setOption.apply(this,arguments);},disable:function(){a.Widget.prototype.disable.call(this);this.close();this.$input.addClass("ui-state-disabled").attr("disabled","disabled");this.$button.addClass("ui-state-disabled").button("disable");
this._trigger("disable");},enable:function(){a.Widget.prototype.enable.call(this);this.$input.removeClass("ui-state-disabled").removeAttr("disabled");this.$button.removeClass("ui-state-disabled").button("enable");this._trigger("enable");},open:function(){this.$input.autocomplete("search","").select();
this._trigger("open");},close:function(){this.$input.autocomplete("close");this._trigger("close");},destroy:function(){var c=this.element;c.next("div.ui-combobox").remove();c.show();a.Widget.prototype.destroy.call(this);}});})(jQuery);